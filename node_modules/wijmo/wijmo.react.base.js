/*!
    *
    * Wijmo Library 5.20231.879
    * http://wijmo.com/
    *
    * Copyright(c) GrapeCity, Inc.  All rights reserved.
    *
    * Licensed under the GrapeCity Commercial License.
    * sales@wijmo.com
    * wijmo.com/products/wijmo-5/license/
    *
    */

"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){extendStatics(t,e);function __(){this.constructor=t}t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),__awaiter=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function fulfilled(t){try{step(o.next(t))}catch(t){i(t)}}function rejected(t){try{step(o.throw(t))}catch(t){i(t)}}function step(t){t.done?r(t.value):new n((function(e){e(t.value)})).then(fulfilled,rejected)}step((o=o.apply(t,e||[])).next())}))},__generator=this&&this.__generator||function(t,e){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function verb(i){return function(a){return function step(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;(o=0,r)&&(i=[2&i[0],r.value]);switch(i[0]){case 0:case 1:r=i;break;case 4:s.label++;return{value:i[1],done:!1};case 5:s.label++;o=i[1];i=[0];continue;case 7:i=s.ops.pop();s.trys.pop();continue;default:if(!(r=s.trys,r=r.length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1];r=i;break}if(r&&s.label<r[2]){s.label=r[2];s.ops.push(i);break}r[2]&&s.ops.pop();s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t];o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},__importStar=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);e.default=t;return e};Object.defineProperty(exports,"__esModule",{value:!0});var reactDomClient,wijmo_1=require("wijmo/wijmo"),ReactDOM=__importStar(require("react-dom")),React=__importStar(require("react"));function lazyImportDomClient(){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(e){try{t=require("react-dom/client");reactDomClient=t}catch(t){reactDomClient=void 0;console.error("Please upgrade react-dom package")}return[2]}))}))}var ComponentBase=function(t){__extends(ComponentBase,t);function ComponentBase(e,n,o){var r=t.call(this,e)||this;r._objPropHash={};r._isMounted=!1;r._mountedCBs=[];r._hostRef=function(t){return r._hostRefValue=t};r._beforeRender=new wijmo_1.Event;r._afterRender=new wijmo_1.Event;r._beforeWillUnmount=new wijmo_1.Event;r._afterWillUnmount=new wijmo_1.Event;r._beforeDidUpdate=new wijmo_1.Event;r._afterDidUpdate=new wijmo_1.Event;if(!ComponentBase._reactMajorVersion){var i=parseInt(React.version);ComponentBase._reactMajorVersion=i;i>=18&&lazyImportDomClient()}r.props=e;r.controlType=n;for(var s=0,a=o&&o.objectProps||[];s<a.length;s++){var p=a[s];r._objPropHash[p]=!0}return r}ComponentBase.prototype.render=function(){this._onBeforeRender();var t=this._renderImpl();this._onAfterRender();return t};ComponentBase.prototype.componentDidMount=function(){var t=this;if(this.timer&&this.control){clearTimeout(this.timer);if(this.control.hostElement){this.control._orgOuter=null;this.control.dispose()}}if(this._isChild()){var e=this.props[ComponentBase._propsParent];e&&e._mountedCB((function(){t._setParent(e)}))}else this._prepareControl();return this.control};ComponentBase.sensitiveDomRender=function(t,e){return __awaiter(this,void 0,void 0,(function(){var n;return __generator(this,(function(o){switch(o.label){case 0:if(!(ComponentBase._reactMajorVersion<18))return[3,1];ReactDOM.render(t,e);return[3,4];case 1:return reactDomClient?[3,3]:[4,lazyImportDomClient()];case 2:o.sent();o.label=3;case 3:n=reactDomClient.createRoot(e);ComponentBase.elemRootMap.push({elem:e,root:n});n.render(t);o.label=4;case 4:return[2]}}))}))};ComponentBase.sensitiveDomUnmount=function(t,e){void 0===e&&(e=!0);return __awaiter(this,void 0,void 0,(function(){var n,o,r;return __generator(this,(function(i){if(ComponentBase._reactMajorVersion<18)ReactDOM.unmountComponentAtNode(t);else{o=void 0;if(r=ComponentBase.elemRootMap.find((function(e,o){if(e.elem===t){n=o;return!0}}))){o=r.root;ComponentBase.elemRootMap.splice(n,1)}o&&e&&o.unmount()}return[2]}))}))};ComponentBase.prototype.componentWillUnmount=function(){this._onBeforeWillUnmount();this._siblingInsertedEH&&this._getElement().removeEventListener("DOMNodeInserted",this._siblingInsertedEH);var t=this.control;if(t)if(this._isChild()){var e=this._getParentProp();if(e){var n=this.parent.control[e];if(wijmo_1.isArray(n)){var o=n.indexOf(t);o>-1&&n.splice(o,1)}}}else t instanceof wijmo_1.Control&&(this.timer=setTimeout((function(){if(t.hostElement){t._orgOuter=null;t.dispose()}})));this._onAfterWillUnmount()};ComponentBase.prototype.shouldComponentUpdate=function(t){return!0};ComponentBase.prototype.componentDidUpdate=function(t){this._onBeforeDidUpdate();var e=this.control;this._copy(e,this.props,t);this._onAfterDidUpdate()};ComponentBase.prototype._mountedCB=function(t){this._isMounted?t():this._mountedCBs.push(t)};ComponentBase.prototype._renderImpl=function(){var t={};t[ComponentBase._propsParent]=this;var e=React.Children.map(this.props.children,(function(e){return e&&React.cloneElement(e,t)})),n={ref:this._hostRef};this._isChild()&&(n.style={display:"none"});return React.createElement("div",n,e)};ComponentBase.prototype._onBeforeRender=function(t){this._beforeRender.raise(this,t)};ComponentBase.prototype._onAfterRender=function(t){this._afterRender.raise(this,t)};ComponentBase.prototype._onBeforeWillUnmount=function(t){this._beforeWillUnmount.raise(this,t)};ComponentBase.prototype._onAfterWillUnmount=function(t){this._afterWillUnmount.raise(this,t)};ComponentBase.prototype._onBeforeDidUpdate=function(t){this._beforeDidUpdate.raise(this,t)};ComponentBase.prototype._onAfterDidUpdate=function(t){this._afterDidUpdate.raise(this,t)};ComponentBase.prototype._createControl=function(){var t=this._isChild()?this._isParentInCtor()?this.parent.control:void 0:this._getElement();return new this.controlType(t)};ComponentBase.prototype._prepareControl=function(){var t=this._getElement(),e=this.props;t&&!this._isChild()&&ComponentBase._copyAttrs(t,e,wijmo_1.Control._rxInputAtts);var n=this.control=this._createControl(),o=n instanceof wijmo_1.Control,r=ComponentBase;if(!this._siblingId){null==this.constructor[r._typeSiblingIdProp]&&(this.constructor[r._typeSiblingIdProp]=++r._siblingDirId+"");this._siblingId=this.constructor[r._typeSiblingIdProp]}t.setAttribute(r._typeSiblingIdProp,this._siblingId);var i={};for(var s in e){var a=e[s];this._ignoreProp(s)||wijmo_1.isUndefined(a)||(s in n?i[s]=a:this._setHostAttribute(t,s,a))}o?n.initialize(i):this._copy(n,i,null,!0);this._isMounted=!0;var p=this._mountedCBs;this._mountedCBs=[];for(var l=0,_=p;l<_.length;l++){(0,_[l])()}wijmo_1.isFunction(e.initialized)&&e.initialized(n)};ComponentBase.prototype._initParent=function(){var t=this._getParentProp();if(t){var e=this.parent.control,n=e[t];if(wijmo_1.isArray(n)){var o=this._getSiblingIndex();(o<0||o>=n.length)&&(o=n.length);n.splice(o,0,this.control);this._siblingInsertedEH=this._siblingInserted.bind(this);this._getElement().addEventListener("DOMNodeInserted",this._siblingInsertedEH)}else e[t]=this.control}};ComponentBase.prototype._setParent=function(t){if(t!==this.parent){if(this.parent)throw"Wijmo child component is already attached to a different parent.";this.parent=t;this._prepareControl();this._initParent()}};ComponentBase.prototype._isChild=function(){return null!=this._parentProp||null!=this._parentInCtor};ComponentBase.prototype._isParentInCtor=function(){return!0===this._parentInCtor};ComponentBase.prototype._getParentProp=function(){return this.props.wjProperty||this._parentProp};ComponentBase.prototype._getSiblingIndex=function(){var t=this._getElement(),e=t.parentElement;if(!e)return-1;for(var n=e.childNodes,o=-1,r=this._siblingId,i=0;i<n.length;i++){var s=n[i];if(1==s.nodeType&&s.getAttribute(ComponentBase._typeSiblingIdProp)==r){++o;if(s===t)return o}}return-1};ComponentBase.prototype._siblingInserted=function(t){if(t.target===this._getElement()){var e=this._getSiblingIndex(),n=this.control,o=this.parent.control[this._getParentProp()],r=o.indexOf(n);if(e>=0&&r>=0&&e!==r){o.splice(r,1);e=Math.min(e,o.length);o.splice(e,0,n)}}};ComponentBase.prototype._copy=function(t,e,n,o){void 0===o&&(o=!1);if(t&&e){var r,i=t===this.control;for(var s in e)if(!this._ignoreProp(s)||!i){var a=e[s];if(s in t){if(this._isEvent(t,s))o&&wijmo_1.isFunction(a)&&t[s].addHandler(a);else if(!n||!this._sameValue(n[s],a))if(null==a)t[s]=a;else if(wijmo_1.isPrimitive(a)||wijmo_1.isFunction(a)||this._objPropHash[s]&&t===(r||(r=this.control)))t[s]=a;else if(wijmo_1.isArray(a)&&wijmo_1.isArray(t[s])){var p=t[s],l=a;if(l.length==p.length)for(var _=0;_<l.length;_++)this._copy(p[_],l[_])}else wijmo_1.isObject(a)&&this._copy(t[s],e[s])}else this._setHostAttribute(t.hostElement,s,e[s])}}};ComponentBase.prototype._setHostAttribute=function(t,e,n){if(t)switch(e){case"className":var o=this._appliedClassName;if(o!==n){wijmo_1.removeClass(t,o);wijmo_1.addClass(t,n);this._appliedClassName=n}break;case"style":wijmo_1.setCss(t,n);break;default:null!=t[e]?t[e]=n:"string"==typeof n&&"$"!==e[0]&&t.setAttribute(e,n)}};ComponentBase.prototype._sameValue=function(t,e){return t==e||wijmo_1.DateTime.equals(t,e)};ComponentBase.prototype._isEvent=function(t,e){var n=t&&t[e];return null!=n&&n instanceof wijmo_1.Event};ComponentBase.prototype._getElement=function(){return this._hostRefValue};ComponentBase.prototype._ignoreProp=function(t){return"children"===t};ComponentBase._copyAttrs=function(t,e,n){if(t)for(var o in e)o.match(n)&&t.setAttribute(o,e[o])};ComponentBase.isInStrictMode=function(t){return!!(t.hasOwnProperty("_reactInternalFiber")&&1&t._reactInternalFiber.mode)};ComponentBase._propsParent="$parent";ComponentBase._typeSiblingIdProp="_wjSiblingIdProp";ComponentBase._siblingDirId=0;ComponentBase.elemRootMap=[];return ComponentBase}(React.Component);exports.ComponentBase=ComponentBase;