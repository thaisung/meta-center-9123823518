/*!
    *
    * Wijmo Library 5.20231.879
    * http://wijmo.com/
    *
    * Copyright(c) GrapeCity, Inc.  All rights reserved.
    *
    * Licensed under the GrapeCity Commercial License.
    * sales@wijmo.com
    * wijmo.com/products/wijmo-5/license/
    *
    */

"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};return function(t,e){extendStatics(t,e);function __(){this.constructor=t}t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),__importStar=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);e.default=t;return e};Object.defineProperty(exports,"__esModule",{value:!0});var wijmo_1=require("wijmo/wijmo"),wijmo_chart_1=require("wijmo/wijmo.chart"),selfModule=__importStar(require("wijmo/wijmo.chart.map")),MapHitTestInfo=function(){function MapHitTestInfo(){}Object.defineProperty(MapHitTestInfo.prototype,"point",{get:function(){return this._pt},enumerable:!0,configurable:!0});Object.defineProperty(MapHitTestInfo.prototype,"item",{get:function(){return this._item},enumerable:!0,configurable:!0});Object.defineProperty(MapHitTestInfo.prototype,"geoPoint",{get:function(){return this._map?this._map.convertBack(this.point):null},enumerable:!0,configurable:!0});Object.defineProperty(MapHitTestInfo.prototype,"chartElement",{get:function(){return this._chartElement},enumerable:!0,configurable:!0});Object.defineProperty(MapHitTestInfo.prototype,"map",{get:function(){return this._map},enumerable:!0,configurable:!0});return MapHitTestInfo}();exports.MapHitTestInfo=MapHitTestInfo;var _DrawOptions=function _DrawOptions(){};exports._DrawOptions=_DrawOptions;var _SvgMapRenderEngine=function(t){__extends(_SvgMapRenderEngine,t);function _SvgMapRenderEngine(e){var i=t.call(this,e)||this;i.scale=1;i.element.setAttribute("xmlns:wj-map","http://www.grapecity.com/wijmo");return i}_SvgMapRenderEngine.prototype.drawPolygon2=function(t,e){var i=t?t.className:null,r=t?t.clipPath:null,o=t?t.style:null,n=this.precision;if(e&&e.length>0){var a=document.createElementNS("http://www.w3.org/2000/svg","path");this._applyColor(a,"stroke",this.stroke);var s=this.strokeWidth;if(null!==s){wijmo_1.isIE()&&(s*=this.scale);this._setAttribute(a,"stroke-width",s.toString())}this._applyColor(a,"fill",this.fill);for(var h="",l=0;l<e.length;l++){var c=e[l],u=c.length/2;if(u>1){h+=" M "+c[0].toFixed(n)+" "+c[1].toFixed(n);for(var p=1;p<u;p++)h+=" L "+c[2*p].toFixed(n)+" "+c[2*p+1].toFixed(n);h+=" Z"}}this._setAttribute(a,"d",h);i&&a.setAttribute("class",i);r&&this._setClipPath(a,r);this._applyStyle(a,o);this._appendChild(a);a.setAttribute("vector-effect","non-scaling-stroke");return a}return null};return _SvgMapRenderEngine}(wijmo_chart_1.SvgRenderEngine);exports._SvgMapRenderEngine=_SvgMapRenderEngine;var _Range=function(){function _Range(t,e){this.min=t;this.max=e}Object.defineProperty(_Range.prototype,"range",{get:function(){return this.max-this.min},enumerable:!0,configurable:!0});_Range.prototype.norm=function(t){return(t-this.min)/this.range};return _Range}();exports._Range=_Range;var _Utils=function(){function _Utils(){}_Utils.getRange=function(t,e){if(t&&e){for(var i=t.length,r=NaN,o=NaN,n=0;n<i;n++){var a=t[n];if(a){var s=void 0;s=wijmo_1.isFunction(e)?e(a):e.getValue(a);wijmo_1.isString(s)&&(s=parseFloat(s));if(isFinite(s)){(isNaN(r)||s<r)&&(r=s);(isNaN(o)||s>o)&&(o=s)}}}if(!isNaN(r)&&!isNaN(o))return new _Range(r,o)}return null};return _Utils}();exports._Utils=_Utils;var ColorScale=function(){function ColorScale(t){this._clrs=[];this._clrUnknown="transparent";this.colors=wijmo_chart_1.Palettes.SequentialSingle.Greys;this.initialize(t)}ColorScale.prototype.initialize=function(t){wijmo_1.copy(this,t)};ColorScale.prototype.convert=function(t,e){void 0===e&&(e=!0);if(!isFinite(t)||0==this._clrs.length)return this.colorUnknown;this._range&&e&&(t=this._range.norm(t));this.scale&&(t=this.scale(t));return 2==this._clrs.length?this._interpolate(this._clrs[0],this._clrs[1],t):this._clrSpline.interpolate(t).toString()};Object.defineProperty(ColorScale.prototype,"scale",{get:function(){return this._scale},set:function(t){this._scale!=t&&(this._scale=t)},enumerable:!0,configurable:!0});Object.defineProperty(ColorScale.prototype,"binding",{get:function(){return this._binding},set:function(t){this._binding!=t&&(this._binding=t)},enumerable:!0,configurable:!0});Object.defineProperty(ColorScale.prototype,"colorUnknown",{get:function(){return this._clrUnknown},set:function(t){this._clrUnknown!=t&&(this._clrUnknown=wijmo_1.asString(t))},enumerable:!0,configurable:!0});Object.defineProperty(ColorScale.prototype,"colors",{get:function(){return this._colors},set:function(t){if(this._colors!=t){this._clrs=[];var e=this._colors=t;if(e){for(var i=0;i<e.length;i++)this._clrs.push(new wijmo_1.Color(e[i]));this._clrSpline=new _ColorSpline(this._clrs)}}},enumerable:!0,configurable:!0});Object.defineProperty(ColorScale.prototype,"format",{get:function(){return this._fmt},set:function(t){this._fmt!=t&&(this._fmt=wijmo_1.asString(t,!0))},enumerable:!0,configurable:!0});ColorScale.prototype.domain=function(t){wijmo_1.isFunction(this.binding)?this._range=_Utils.getRange(t,this.binding):this._range=_Utils.getRange(t,new wijmo_1.Binding(this.binding))};ColorScale.prototype.getValue=function(t){return wijmo_1.isFunction(this.binding)?this.binding(t):new wijmo_1.Binding(this.binding).getValue(t)};ColorScale.prototype._interpolate=function(t,e,i){var r=1-(i=wijmo_1.clamp(i,0,1));return wijmo_1.Color.fromRgba(t.r*r+e.r*i,t.g*r+e.g*i,t.b*r+e.b*i,t.a*r+e.a*i).toString()};ColorScale.prototype._drawLegend=function(t,e,i){_ColorScaleLegend.draw(t,this,e,i)};ColorScale.prototype._measureLegend=function(t,e,i,r){return _ColorScaleLegend.measure(t,this,e,i,r)};return ColorScale}();exports.ColorScale=ColorScale;var _ColorScaleLegend=function(){function _ColorScaleLegend(){}_ColorScaleLegend.measure=function(t,e,i,r,o){var n=i?new wijmo_1.Size(this.itemSize,o-120):new wijmo_1.Size(r-80,this.itemSize),a=this._getValues(e),s=a.length;if(a.length){for(var h=new wijmo_1.Size,l=0;l<s;l++){var c=this._getLabel(e,a[l]),u=t.measureString(c);h.width=Math.max(h.width,u.width);h.height=Math.max(h.height,u.height)}h.width&&h.height&&(i?n.width+=h.width+this.marginText:n.height+=h.height+this.marginText)}return n};_ColorScaleLegend.draw=function(t,e,i,r){t.stroke="transparent";var o=this._getValues(e);if(r){for(var n=(i=i.inflate(0,-10)).height/100,a=0;a<100;a++){t.fill=e.convert((a+.5)/100,!1);t.drawRect(i.left,i.top+a*n,this.itemSize,n+1)}if(o.length){t.stroke="black";for(a=0;a<o.length;a++){var s=o[a],h=e._range.norm(s),l=i.top+h*i.height,c=this._getLabel(e,s),u=t.measureString(c);t.drawString(c,new wijmo_1.Point(i.left+this.itemSize+this.marginText,l+.5*u.height));t.drawLine(i.left,l,i.left+this.itemSize,l)}}}else{var p=(i=i.inflate(-20,0)).width/100;n=0;if(o.length)for(a=0;a<o.length;a++){s=o[a],h=e._range.norm(s);e.scale&&(h=e.scale(h));var _=i.left+h*i.width;c=this._getLabel(e,s),u=t.measureString(c);n=Math.max(n,u.height);t.drawString(this._getLabel(e,s),new wijmo_1.Point(_-.5*u.width,i.top+u.height))}n&&(n+=this.marginText);for(a=0;a<100;a++){t.fill=e.convert((a+.5)/100,!1);t.drawRect(i.left+a*p,i.top+n,p+1,this.itemSize)}if(o.length){t.stroke="black";for(a=0;a<o.length;a++){s=o[a],h=e._range.norm(s);e.scale&&(h=e.scale(h));_=i.left+h*i.width;t.drawLine(_,i.bottom-this.itemSize,_,i.bottom)}}}};_ColorScaleLegend._getValues=function(t){var e=[],i=t._range;if(i)for(var r=this._calcDelta(i.range),o=Math.round(i.min/r)*r;o<=i.max;o+=r)o<i.min||e.push(o);return e};_ColorScaleLegend._getLabel=function(t,e){return t.format?wijmo_1.Globalize.formatNumber(e,t.format):e.toString()};_ColorScaleLegend._calcDelta=function(t){var e=this._nicePrecision(t),i=t/10,r=this._niceNumber(2*i,-e,!0);r<i&&(r=this._niceNumber(i,1-e,!1));r<i&&(r=this._niceTickNumber(i));return r};_ColorScaleLegend._nicePrecision=function(t){if(!wijmo_1.isNumber(t)||t<=0)return 0;var e,i=Math.log(t)/Math.LN10;e=i>=0?Math.floor(i):Math.ceil(i);var r=t/Math.pow(10,e);if(r<3){e=1-e;(r=t/Math.pow(10,e))<3&&(e+=1)}return e};_ColorScaleLegend._niceTickNumber=function(t){if(0==t)return t;t<0&&(t=-t);var e=Math.log(t)/Math.LN10,i=Math.floor(e),r=t/Math.pow(10,i),o=10;r<=1?o=1:r<=2?o=2:r<=5&&(o=5);return o*Math.pow(10,i)};_ColorScaleLegend._niceNumber=function(t,e,i){if(0==t)return t;t<0&&(t=-t);var r=t/Math.pow(10,e),o=10;i?r<1.5?o=1:r<3?o=2:r<4.5?o=4:r<7&&(o=5):r<=1?o=1:r<=2?o=2:r<=5&&(o=5);return o*Math.pow(10,e)};_ColorScaleLegend.itemSize=20;_ColorScaleLegend.marginText=4;return _ColorScaleLegend}(),_ColorSpline=function(){function _ColorSpline(t){this._clrs=t;for(var e=t.length,i=[],r=[],o=[],n=[],a=0;a<e;a++){var s=t[a],h=a/(e-1);i.push(h);r.push(s.r);o.push(s.g);n.push(s.b)}this._rsp=new _Spline(i,r);this._gsp=new _Spline(i,o);this._bsp=new _Spline(i,n)}_ColorSpline.prototype.interpolate=function(t){t=wijmo_1.clamp(t,0,1);var e=this._rsp.calculate(t),i=this._gsp.calculate(t),r=this._bsp.calculate(t);return wijmo_1.Color.fromRgba(e,i,r)};return _ColorSpline}(),_Spline=function(){function _Spline(t,e,i){this.k=.002;this._a=[];this._b=[];this._c=[];this._d=[];this.m=[[-.5,1.5,-1.5,.5],[1,-2.5,2,-.5],[-.5,0,.5,0],[0,1,0,0]];this._x=t;this._y=e;var r=this._len=i||Math.min(t.length,e.length);if(r>3)for(var o=0;o<r-1;o++){var n=0==o?new wijmo_1.Point(t[o],e[o]):new wijmo_1.Point(t[o-1],e[o-1]),a=new wijmo_1.Point(t[o],e[o]),s=new wijmo_1.Point(t[o+1],e[o+1]),h=o==r-2?new wijmo_1.Point(t[o+1],e[o+1]):new wijmo_1.Point(t[o+2],e[o+2]),l=new wijmo_1.Point,c=new wijmo_1.Point,u=new wijmo_1.Point,p=new wijmo_1.Point;l.x=n.x*this.m[0][0]+a.x*this.m[0][1]+s.x*this.m[0][2]+h.x*this.m[0][3];c.x=n.x*this.m[1][0]+a.x*this.m[1][1]+s.x*this.m[1][2]+h.x*this.m[1][3];u.x=n.x*this.m[2][0]+a.x*this.m[2][1]+s.x*this.m[2][2]+h.x*this.m[2][3];p.x=n.x*this.m[3][0]+a.x*this.m[3][1]+s.x*this.m[3][2]+h.x*this.m[3][3];l.y=n.y*this.m[0][0]+a.y*this.m[0][1]+s.y*this.m[0][2]+h.y*this.m[0][3];c.y=n.y*this.m[1][0]+a.y*this.m[1][1]+s.y*this.m[1][2]+h.y*this.m[1][3];u.y=n.y*this.m[2][0]+a.y*this.m[2][1]+s.y*this.m[2][2]+h.y*this.m[2][3];p.y=n.y*this.m[3][0]+a.y*this.m[3][1]+s.y*this.m[3][2]+h.y*this.m[3][3];this._a.push(l);this._b.push(c);this._c.push(u);this._d.push(p)}}_Spline.prototype.calculate=function(t){t*=this._len-1;var e=Math.floor(t);e<0&&(e=0);e>this._len-2&&(e=this._len-2);var i=t-e;this._a[e].x,this._b[e].x,this._c[e].x,this._d[e].x;return((this._a[e].y*i+this._b[e].y)*i+this._c[e].y)*i+this._d[e].y};return _Spline}(),FlexMap=function(t){__extends(FlexMap,t);function FlexMap(e,i){var r=t.call(this,e,null,!0)||this;r._layers=new wijmo_1.ObservableArray;r._center=new wijmo_1.Point;r._zoom=1;r._zoomStep=.5;r._offset=new wijmo_1.Point;r._proj=new MercatorProjection;r._touchStartH=r._touchStart.bind(r);r._touchMoveH=r._touchMove.bind(r);r._touchEndH=r._touchEnd.bind(r);r._touchCancelH=r._touchCancel.bind(r);r._mouseWheelH=r._mouseWheel.bind(r);r._handleTouch=!1;var o=r.hostElement;r.applyTemplate("wj-control wj-flexchart wj-flexmap",null,null);r._currentRenderEngine=new _SvgMapRenderEngine(o);var n=wijmo_1.createElement("<div></div>",null,{position:"relative"});r._overlay=wijmo_1.createElement("<div></div>",n,{position:"absolute",left:"90%",bottom:"90%"});wijmo_1.createElement('<button class="wj-btn"><span class="wj-glyph-plus"></span></button>',r._overlay).addEventListener("click",(function(){return r.zoom+=r._zoomStep}));wijmo_1.createElement('<button class="wj-btn"><span class="wj-glyph-minus"></span></button>',r._overlay).addEventListener("click",(function(){return r.zoom-=r._zoomStep}));wijmo_1.addClass(o,"wj-flexchart-touch-disabled");o.appendChild(n);r._legend=new wijmo_chart_1.Legend(r);r._legend.position=wijmo_chart_1.Position.None;r._tooltip=new wijmo_chart_1.ChartTooltip;r.tooltip.content=null;var a=r;r.layers.collectionChanged.addHandler((function(){r.layers.forEach((function(t){return t.map=a}));r.invalidate()}));r.addEventListener(o,"click",(function(t){if(!a.isDisabled){var e=a._tooltip;e.content&&a.isTouching&&a._updateTooltip(e,t)}}));r.addEventListener(o,"mousedown",(function(t){if(!a.isDisabled&&0==t.button){r.focus();r._dragStart=new wijmo_1.Point(t.pageX,t.pageY);r._hideToolTip()}}));r.addEventListener(o,"mousemove",(function(t){if(!a.isDisabled)if(a._dragStart){var e=r.convertBack(r._toControl(a._dragStart)),i=r.convertBack(r._toControl(t));r.center=new wijmo_1.Point(r.center.x-i.x+e.x,r.center.y-i.y+e.y);r._dragStart=new wijmo_1.Point(t.pageX,t.pageY)}else{var o=a._tooltip;o.content&&!a.isTouching&&a._updateTooltip(o,t)}}));r.addEventListener(o,"mouseup",(function(t){r._dragStart=null}));r.addEventListener(o,"mouseleave",(function(t){if(t.target==a.hostElement){r._dragStart=null;a._hideToolTip()}}));r.addEventListener(o,"touchstart",r._touchStartH);r.addEventListener(o,"touchmove",r._touchMoveH);r.addEventListener(o,"touchcancel",r._touchCancelH);r.addEventListener(o,"touchend",r._touchEndH);r.addEventListener(o,"wheel",r._mouseWheelH);r.initialize(i);r.refresh();return r}Object.defineProperty(FlexMap.prototype,"layers",{get:function(){return this._layers},enumerable:!0,configurable:!0});Object.defineProperty(FlexMap.prototype,"center",{get:function(){return this._center},set:function(t){if(this._center!=t){this._center=t;this.invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(FlexMap.prototype,"zoom",{get:function(){return this._zoom},set:function(t){t<1&&(t=1);if(this._zoom!=t){this._zoom=t;this.invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(FlexMap.prototype,"tooltip",{get:function(){return this._tooltip},enumerable:!0,configurable:!0});FlexMap.prototype.convert=function(t){return this._convertMercator(t)};FlexMap.prototype.convertBack=function(t){return this._convertMercatorBack(t)};FlexMap.prototype.hitTest=function(t,e){var i=this._toControl(t,e),r=new MapHitTestInfo;if(wijmo_chart_1.FlexChartBase._contains(this._rectHeader,i))r._chartElement=wijmo_chart_1.ChartElement.Header;else if(wijmo_chart_1.FlexChartBase._contains(this._rectFooter,i))r._chartElement=wijmo_chart_1.ChartElement.Footer;else if(wijmo_chart_1.FlexChartBase._contains(this._rectLegend,i))r._chartElement=wijmo_chart_1.ChartElement.Legend;else if(wijmo_chart_1.FlexChartBase._contains(this._rectChart,i)){var o=void 0;if(t instanceof MouseEvent)o=new wijmo_1.Point(t.x,t.y);else{var n=this._getHostOffset();o=new wijmo_1.Point(n.x+i.x,n.y+i.y)}r._item=this._getItem(o)}return r};FlexMap.prototype.zoomTo=function(t){var e=this._proj.maxY,i=Math.max(t.top,-e),r=Math.min(t.bottom,e),o=this.convert(new wijmo_1.Point(t.left,i)),n=this.convert(new wijmo_1.Point(t.right,r));if(wijmo_chart_1._DataInfo.isValid(o.x,o.y,n.x,n.y)){var a=new wijmo_1.Point(.5*(o.x+n.x),.5*(o.y+n.y));this.center=this.convertBack(a);o=this.convert(new wijmo_1.Point(t.left,i));n=this.convert(new wijmo_1.Point(t.right,r));var s=this._mapRect.width/Math.abs(n.x-o.x),h=this._mapRect.height/Math.abs(n.y-o.y);this.zoom*=this.zoom+Math.log(Math.min(s,h))*Math.LOG2E}};FlexMap.prototype.invalidate=function(e){e&&this.layers.forEach((function(t){t._clearCache&&t._clearCache()}));t.prototype.invalidate.call(this,e)};FlexMap.prototype._renderChart=function(t,e,i){this.onRendering(new wijmo_chart_1.RenderEventArgs(t));var r=e.width,o=e.height,n=this._parseMargin(this.plotMargin);isNaN(n.left)&&(n.left=8);isNaN(n.right)&&(n.right=8);isNaN(n.top)&&(n.top=8);isNaN(n.bottom)&&(n.bottom=8);e.top+=n.top;o=e.height-(n.top+n.bottom);e.height=o>0?o:24;e.left+=n.left;r=e.width-(n.left+n.right);e.width=r>0?r:24;var a="mapRect"+(1e6*Math.random()).toFixed();t.addClipRect(e,a);var s=t.startGroup(null,a,!0);this._mapRect=e.clone();var h=this._size=.5*Math.min(e.width,e.height);this._offset.x=this._mapRect.left;this._offset.y=this._mapRect.top;e.width>2*h?this._offset.x=.5*e.width-h+this._mapRect.left:e.height>2*this._size&&(this._offset.y=.5*e.height-h+this._mapRect.top);var l=Math.pow(2,this.zoom),c=this._proj.convert(this.center);c.x=c.x*l*h-h;c.y=c.y*l*h-h;this._offset.x-=c.x;this._offset.y-=c.y;t.precision=6;for(var u=0;u<this.layers.length;u++){var p=1/(l*h);t.scale=p;var _=t.element.createSVGTransform(),f=t.element.createSVGMatrix();f.a=f.d=l*h;f.b=f.c=0;f.e=this._offset.x;f.f=this._offset.y;_.setMatrix(f);this.layers[u].render(t,_,s)}t.endGroup();var m=this._rectChart.bottom-this._mapRect.bottom;this._overlay.style.left=(this._mapRect.right-80).toString()+"px";this._overlay.style.bottom=m.toString()+"px";this.onRendered(new wijmo_chart_1.RenderEventArgs(t))};FlexMap.prototype._getDesiredLegendSize=function(t,e,i,r){for(var o=new wijmo_1.Size,n=0;n<this.layers.length;n++){var a=this.layers[n];if(a.colorScale){a.getAllFeatures?a.colorScale.domain(a.getAllFeatures()):a.colorScale.domain(a.itemsSource);var s=a.colorScale._measureLegend(t,e,i,r);s&&s.width&&s.height&&(o=s)}}return o};FlexMap.prototype._renderLegend=function(t,e,i,r,o,n){var a=new wijmo_1.Rect(e.x,e.y,o,n);this.layers.forEach((function(e){e.colorScale&&e.colorScale._drawLegend(t,a,r)}))};FlexMap.prototype._copy=function(t,e){if("layers"==t){this.layers.clear();for(var i=wijmo_1.asArray(e),r=0;r<i.length;r++)this.layers.push(i[r]);return!0}return!1};FlexMap.prototype._updateTooltip=function(t,e){var i=t.content;if(i){var r=this._getItem(new wijmo_1.Point(e.clientX,e.clientY));if(r){wijmo_1.isFunction(i)&&(i=i(r));i=wijmo_1.format(i,r)}else i=null}i&&i.trim().length>0?this._showToolTip(i,new wijmo_1.Rect(e.clientX,e.clientY,5,5)):this._hideToolTip()};FlexMap.prototype._getItemById=function(t){for(var e=0;e<this.layers.length;e++){var i=this.layers[e];if(i._getFeatureById){if(r=i._getFeatureById(t))return r.properties}else if(i.getItemById){var r;if(r=i.getItemById(t))return r}}return null};FlexMap.prototype._convertMercator=function(t){var e=Math.pow(2,this.zoom)*this._size,i=this._proj.convert(t);i.x*=e;i.y*=e;i.x+=this._offset.x;i.y+=this._offset.y;return i};FlexMap.prototype._convertMercatorBack=function(t){var e=Math.pow(2,this.zoom)*this._size,i=this._proj,r=t.clone();r.x-=this._offset.x;r.y-=this._offset.y;r.x/=e;r.y/=e;return r=i.convertBack(r)};FlexMap.prototype._touchStart=function(t){if(!this.isDisabled){switch(t.touches.length){case 1:this._handleTouch=!0;this._dragStart=new wijmo_1.Point(t.touches[0].pageX,t.touches[0].pageY);break;case 2:this._dragStart=null;this._handleTouch=!0;this._touch1=new wijmo_1.Point(t.touches[0].pageX,t.touches[0].pageY);this._touch2=new wijmo_1.Point(t.touches[1].pageX,t.touches[1].pageY)}this._handleTouch&&this._hideToolTip()}};FlexMap.prototype._touchMove=function(t){if(!this.isDisabled){this._handleTouch&&t.preventDefault();if(this._dragStart){var e=this.convertBack(this._toControl(this._dragStart)),i=this.convertBack(this._toControl(t.touches[0].pageX,t.touches[0].pageY));this.center=new wijmo_1.Point(this.center.x-i.x+e.x,this.center.y-i.y+e.y);this._dragStart=new wijmo_1.Point(t.touches[0].pageX,t.touches[0].pageY)}else if(this._touch1&&this._touch2){var r=new wijmo_1.Point(t.touches[0].pageX,t.touches[0].pageY),o=new wijmo_1.Point(t.touches[1].pageX,t.touches[1].pageY),n=this._dist(this._touch1,this._touch2),a=this._dist(r,o);if(Math.abs(a-n)>1){this.zoom+=Math.log2(a/n);this._touch1=r;this._touch2=o}}}};FlexMap.prototype._dist=function(t,e){var i=t.x-e.x,r=t.y-e.y;return Math.sqrt(i*i+r*r)};FlexMap.prototype._touchEnd=function(t){this._handleTouch=!1;this._dragStart=this._touch1=this._touch2=null};FlexMap.prototype._touchCancel=function(t){this._handleTouch=!1;this._dragStart=this._touch1=this._touch2=null};FlexMap.prototype._mouseWheel=function(t){if(!this.isDisabled){t.preventDefault();this._hideToolTip();var e=-t.deltaY;e=e>0?.1:-.1;this.zoom+=e}};FlexMap.prototype._getItem=function(t){var e=null;if(wijmo_1.isFirefox()||wijmo_1.isIE()){var i=t.clone();i.x+=pageXOffset;i.y+=pageYOffset;i=this._toControl(i);var r=this.layers.length;i=this.convertBack(i);for(var o=r-1;o>=0;o--){var n=this.layers[o];if(n._hitTest)e=n._hitTest(i.x,i.y);else if(n.getItemById){if(a=document.elementFromPoint(t.x,t.y)){null!=(s=a.getAttribute("wj-map:id"))&&(e=n.getItemById(s))}}if(e)break}}else{var a;if(a=document.elementFromPoint(t.x,t.y)){var s;null!=(s=a.getAttribute("wj-map:id"))&&(e=this._getItemById(s))}}return e};return FlexMap}(wijmo_chart_1.FlexChartBase);exports.FlexMap=FlexMap;var MercatorProjection=function(){function MercatorProjection(){this.maxY=(2*Math.atan(Math.exp(Math.PI))-.5*Math.PI)/M.toRadians}MercatorProjection.prototype.convert=function(t){var e=this._convertX(t.x),i=Math.abs(t.y)>this.maxY?(t.y>0?1:-1)*this.maxY:t.y;i=this._convertY(i);return new wijmo_1.Point(e,i)};MercatorProjection.prototype.convertBack=function(t){var e=this._convertBackX(t.x),i=this._convertBackY(t.y);return new wijmo_1.Point(e,i)};MercatorProjection.prototype._convertX=function(t){return(t*M.toRadians+Math.PI)/M.pi2};MercatorProjection.prototype._convertBackX=function(t){return(t*M.pi2-Math.PI)/M.toRadians};MercatorProjection.prototype._convertY=function(t){return(Math.PI+Math.log(Math.tan(M.pi4-.5*t*M.toRadians)))/M.pi2};MercatorProjection.prototype._convertBackY=function(t){return-(2*Math.atan(Math.exp(t*M.pi2-Math.PI))-.5*Math.PI)/M.toRadians};return MercatorProjection}(),M=function(){function M(){}M.toRadians=Math.PI/180;M.pi4=.25*Math.PI;M.pi2=2*Math.PI;return M}(),MapLayerBase=function(){function MapLayerBase(){this.itemsSourceChanged=new wijmo_1.Event}Object.defineProperty(MapLayerBase.prototype,"map",{get:function(){return this._map},set:function(t){this._map=t},enumerable:!0,configurable:!0});Object.defineProperty(MapLayerBase.prototype,"style",{get:function(){return this._style},set:function(t){if(this._style!=t){this._style=t;this.invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(MapLayerBase.prototype,"itemsSource",{get:function(){return this._items},set:function(t){this._setItems(t)},enumerable:!0,configurable:!0});MapLayerBase.prototype.onItemsSourceChanged=function(t){this.itemsSourceChanged.raise(this,t)};Object.defineProperty(MapLayerBase.prototype,"url",{get:function(){return this._url},set:function(t){if(this._url!=t){this._url=wijmo_1.asString(t,!0);this._loadUrl()}},enumerable:!0,configurable:!0});Object.defineProperty(MapLayerBase.prototype,"colorScale",{get:function(){return this._colorScale},set:function(t){if(this._colorScale!=t){this._colorScale=t;this._clearCache();this.invalidate()}},enumerable:!0,configurable:!0});MapLayerBase.prototype.render=function(t,e,i){};MapLayerBase.prototype.invalidate=function(){this.map&&this.map.invalidate()};MapLayerBase.prototype.initialize=function(t){wijmo_1.copy(this,t)};MapLayerBase.prototype._applyStyle=function(t){if(this.style){t.fill=this.style.fill;t.stroke=this.style.stroke;t.strokeWidth=this.style.strokeWidth}};MapLayerBase.prototype._clearCache=function(){};MapLayerBase.prototype._loadUrl=function(){var t=this;this.url?wijmo_1.httpRequest(this.url,{success:function(e){return t.itemsSource=JSON.parse(e.responseText)}}):this.itemsSource=null};MapLayerBase.prototype._setItems=function(t){if(this._items!=t){this._clearCache();this._items=t;this.onItemsSourceChanged(new wijmo_1.EventArgs);this.invalidate()}};return MapLayerBase}();exports.MapLayerBase=MapLayerBase;var ScatterMapLayer=function(t){__extends(ScatterMapLayer,t);function ScatterMapLayer(e){var i=t.call(this)||this;i._symbolSize=5;i._symbolMinSize=5;i._symbolMaxSize=50;i._index=0;i._prefix="_";i._elMap={};i._hasBindings=!1;i.style={stroke:"grey",strokeWidth:.5,fill:"transparent"};i.initialize(e);return i}Object.defineProperty(ScatterMapLayer.prototype,"symbolSize",{get:function(){return this._symbolSize},set:function(t){if(this._symbolSize!=t){this._symbolSize=wijmo_1.asNumber(t);this.invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(ScatterMapLayer.prototype,"symbolMinSize",{get:function(){return this._symbolMinSize},set:function(t){if(this._symbolMinSize!=t){this._symbolMinSize=wijmo_1.asNumber(t);this.invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(ScatterMapLayer.prototype,"symbolMaxSize",{get:function(){return this._symbolMaxSize},set:function(t){if(this._symbolMaxSize!=t){this._symbolMaxSize=wijmo_1.asNumber(t);this.invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(ScatterMapLayer.prototype,"itemsSource",{get:function(){return this._items},set:function(t){this._setItems(t)},enumerable:!0,configurable:!0});Object.defineProperty(ScatterMapLayer.prototype,"binding",{get:function(){return this._binding},set:function(t){if(this._binding!=t){this._binding=wijmo_1.asString(t,!0);this.parseBindings();this.invalidate()}},enumerable:!0,configurable:!0});ScatterMapLayer.prototype.render=function(t,e,i){this._elMap={};this._index=0;this._prefix=this.map.layers.indexOf(this).toString()+"_";var r=t.startGroup();this.map,this.map._mapRect;this._applyStyle(t);var o=this.itemsSource,n=o?o.length:0,a=this._xBnd,s=this._yBnd,h=this._cBnd,l=this._szBnd;l&&(this._szRange=_Utils.getRange(o,l));var c=this.colorScale;c&&c.domain(o);if(a&&s||h)for(var u=0;u<n;u++){var p=o[u];if(p){var _=this.getItemPos(p);if(_){c&&(t.fill=c.convert(c.getValue(p)));this.renderItem(t,p,_.x,_.y)}}this._index++}t.endGroup();return r};ScatterMapLayer.prototype.renderItem=function(t,e,i,r){if(wijmo_1.isNumber(i)&&wijmo_1.isNumber(r)){var o=this.map.convert(new wijmo_1.Point(i,r));if(isFinite(o.x)&&isFinite(o.y)){var n=this.symbolSize;if(this._szRange){var a=this._szBnd.getValue(e);a=Math.sqrt((a-this._szRange.min)/this._szRange.range);n=this.symbolMinSize+(this.symbolMaxSize-this.symbolMinSize)*a}if(isFinite(n)){var s=t.drawEllipse(o.x,o.y,.5*n,.5*n);s.setAttribute("vector-effect","non-scaling-stroke");var h=this.createId();this.setId(s,h);this._elMap[h]=s}}}};ScatterMapLayer.prototype.getItemById=function(t){var e=this.itemsSource;if(e){if(this._elMap[t]){var i=parseInt(t.split("_")[1]);if(wijmo_1.isNumber(i)&&i<e.length)return e[i]}}return null};ScatterMapLayer.prototype.getGeoBBox=function(){var t=this.itemsSource,e=t?t.length:0;if(this._hasBindings){for(var i=NaN,r=NaN,o=NaN,n=NaN,a=0;a<e;a++){var s=t[a];if(s){var h=this.getItemPos(s);if(h){if(isFinite(h.x)){(isNaN(i)||h.x<i)&&(i=h.x);(isNaN(r)||h.x>r)&&(r=h.x)}if(isFinite(h.y)){(isNaN(o)||h.y<o)&&(o=h.y);(isNaN(n)||h.y>n)&&(n=h.y)}}}}if(!isNaN(i)&&!isNaN(o))return new wijmo_1.Rect(i,o,r-i,n-o)}return null};ScatterMapLayer.prototype.getItemPos=function(t){var e=this._xBnd,i=this._yBnd,r=this._cBnd;if(r){var o=r.getValue(t);if(o){var n=o.split(",");if(n&&n.length>=2){var a=parseFloat(n[0]),s=parseFloat(n[1]);if(isFinite(a)&&isFinite(s))return new wijmo_1.Point(a,s)}}}else{a=e.getValue(t),s=i.getValue(t);wijmo_1.isString(a)&&(a=parseFloat(a));wijmo_1.isString(s)&&(s=parseFloat(s));if(isFinite(a)&&isFinite(s))return new wijmo_1.Point(a,s)}return null};ScatterMapLayer.prototype.setId=function(t,e){t&&e&&t.setAttribute("wj-map:id",e)};ScatterMapLayer.prototype.createId=function(){return this._prefix+this._index.toString()};ScatterMapLayer.prototype.parseBindings=function(){var t=this.binding;this._xBnd=this._yBnd=this._szBnd=null;this._hasBindings=!1;if(t){var e=t.split(",");if(1==e.length){this._cBnd=new wijmo_1.Binding(e[0].trim());this._hasBindings=!0}else if(e.length>=2){this._xBnd=new wijmo_1.Binding(e[0].trim());this._yBnd=new wijmo_1.Binding(e[1].trim());this._hasBindings=!0;e.length>=3&&(this._szBnd=new wijmo_1.Binding(e[2].trim()))}}};return ScatterMapLayer}(MapLayerBase);exports.ScatterMapLayer=ScatterMapLayer;var _GeoJsonRender=function(){function _GeoJsonRender(){this._map={};this._index=0;this.prefix="_";this.hasPoints=!1;this.symbolSize=5}_GeoJsonRender.prototype.convert=function(t){this.converter&&(t=this.converter.convert(t));return t};_GeoJsonRender.prototype.render=function(t,e,i){void 0===i&&(i=null);this._map={};this._index=0;this.hasPoints=!1;if(e)switch(e.type){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":case"GeometryCollection":this.renderGeometry(t,e);break;case"Feature":this.renderFeature(t,e,i);break;case"FeatureCollection":if(e.features)for(var r=0;r<e.features.length;r++)this.renderFeature(t,e.features[r],i)}};_GeoJsonRender.prototype.renderFeature=function(t,e,i){void 0===i&&(i=null);if(e&&e.geometry){i&&i(t,e);var r=this.createId();this.renderGeometry(t,e.geometry,r);this._map[r]=e;this._index++}};_GeoJsonRender.prototype.renderGeometry=function(t,e,i){void 0===i&&(i=null);if(e)switch(e.type){case"Point":this.renderPoint(t,e,i);this.hasPoints=!0;break;case"MultiPoint":this.renderMultiPoint(t,e,i);this.hasPoints=!0;break;case"LineString":this.renderLineString(t,e,i);break;case"MultiLineString":this.renderMultiLineString(t,e,i);break;case"Polygon":this.renderPolygon(t,e,i);break;case"MultiPolygon":this.renderMultiPolygon(t,e,i);break;case"GeometryCollection":if(e.geometries)for(var r=0;r<e.geometries.length;r++)this.renderGeometry(t,e.geometries[r],i)}};_GeoJsonRender.prototype.renderPoint=function(t,e,i){void 0===i&&(i=null);if(e&&e.coordinates&&e.coordinates.length>=2){var r=new wijmo_1.Point(e.coordinates[0],e.coordinates[1]);r=this.convert(r);var o=t.scale*this.symbolSize,n=t.drawEllipse(r.x,r.y,o,o);n.setAttribute("vector-effect","non-scaling-stroke");this.setAttribute(n,i)}};_GeoJsonRender.prototype.renderMultiPoint=function(t,e,i){void 0===i&&(i=null);if(e&&e.coordinates)for(var r=e.coordinates,o=e.coordinates.length,n=0;n<o;n++){var a=new wijmo_1.Point(r[n][0],r[n][1]);a=this.convert(a);var s=t.scale*this.symbolSize,h=t.drawEllipse(a.x,a.y,s,s);this.setAttribute(h,i)}};_GeoJsonRender.prototype.renderLineString=function(t,e,i){void 0===i&&(i=null);if(e&&e.coordinates){for(var r=e.coordinates,o=e.coordinates.length,n=[],a=[],s=0;s<o;s++){var h=new wijmo_1.Point(r[s][0],r[s][1]);h=this.convert(h);n.push(h.x);a.push(h.y)}var l=t.drawLines(n,a);this.setAttribute(l,i)}};_GeoJsonRender.prototype.renderMultiLineString=function(t,e,i){void 0===i&&(i=null);if(e&&e.coordinates)for(var r=e.coordinates,o=r.length,n=0;n<o;n++){for(var a=r[n],s=[],h=[],l=0;l<a.length;l++){var c=new wijmo_1.Point(a[l][0],a[l][1]);c=this.convert(c);s.push(c.x);h.push(c.y)}var u=t.drawLines(s,h);this.setAttribute(u,i)}};_GeoJsonRender.prototype.renderMultiPolygon=function(t,e,i){void 0===i&&(i=null);if(e&&e.coordinates)for(var r=e.coordinates,o=r.length,n=t,a=0;a<o;a++){for(var s=r[a],h=(s.length,[]),l=0;l<1;l++){for(var c=s[l],u=[],p=0;p<c.length;p++){var _=new wijmo_1.Point(c[p][0],c[p][1]);_=this.convert(_);u.push(_.x);u.push(_.y)}h.push(u)}var f=n.drawPolygon2(null,h);this.setAttribute(f,i)}};_GeoJsonRender.prototype.renderPolygon=function(t,e,i){void 0===i&&(i=null);if(e&&e.coordinates){for(var r=e.coordinates,o=r.length,n=t,a=[],s=0;s<o;s++){for(var h=r[s],l=[],c=0;c<h.length;c++){var u=new wijmo_1.Point(h[c][0],h[c][1]);u=this.convert(u);l.push(u.x);l.push(u.y)}a.push(l)}var p=n.drawPolygon2(null,a);this.setAttribute(p,i)}};_GeoJsonRender.prototype.getFeatureById=function(t){return this._map[t]};_GeoJsonRender.prototype.getAllFeatures=function(t){var e=[];if(t)switch(t.type){case"Feature":e.push(t);break;case"FeatureCollection":if(t.features)for(var i=0;i<t.features.length;i++)e.push(t.features[i])}return e};_GeoJsonRender.prototype.getBBox=function(t){var e=null;if(t)switch(t.type){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":case"GeometryCollection":e=this.getGeometryBBox(t);break;case"Feature":e=this.getGeometryBBox(t.geometry);break;case"FeatureCollection":if(t.features)for(var i=0;i<t.features.length;i++){var r=this.getGeometryBBox(t.features[i].geometry,e);r&&(e=r)}}return e};_GeoJsonRender.prototype.getGeometryBBox=function(t,e){var i=null;if(t)switch(t.type){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":var r=t.coordinates,o=this.flat(r,10);i=this.getRect(o,e);break;case"GeometryCollection":if(t.geometries)for(var n=0;n<t.geometries.length;n++)(i=this.getGeometryBBox(t.geometries[n],e))&&(e=i.clone())}return i};_GeoJsonRender.prototype.getRect=function(t,e){var i=null;if(t){var r=NaN,o=NaN,n=NaN,a=NaN;if(e){r=e.left;o=e.right;n=e.top;a=e.bottom}for(var s=t.length/2,h=0;h<s;h++){var l=t[2*h],c=t[2*h+1];(isNaN(r)||l<r)&&(r=l);(isNaN(o)||l>o)&&(o=l);(isNaN(n)||c<n)&&(n=c);(isNaN(a)||c>a)&&(a=c)}isNaN(r)||isNaN(n)||(i=new wijmo_1.Rect(r,n,o-r,a-n))}return i};_GeoJsonRender.prototype.hitTest=function(t,e,i){for(var r=this.getAllFeatures(t),o=0;o<r.length;o++)if(_GeoJsonHitTest.hitTest(r[o],e,i))return r[o];return null};_GeoJsonRender.prototype.setAttribute=function(t,e){t&&e&&t.setAttribute("wj-map:id",e)};_GeoJsonRender.prototype.createId=function(){return this.prefix+this._index.toString()};_GeoJsonRender.prototype.flat=function(t,e){if(t.flat)return t.flat(e);for(var i=t.slice(),r=[];i.length;){var o=i.pop();Array.isArray(o)?i.push.apply(i,o):r.push(o)}return r.reverse()};return _GeoJsonRender}();exports._GeoJsonRender=_GeoJsonRender;var _GeoJsonHitTest=function(){function _GeoJsonHitTest(){}_GeoJsonHitTest.hitTest=function(t,e,i){var r=!1;if(t)switch(t.type){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":r=!1;break;case"Polygon":r=this.hitTestPolygon(t,e,i);break;case"MultiPolygon":r=this.hitTestMultiPolygon(t,e,i);break;case"GeometryCollection":r=!1;break;case"Feature":r=this.hitTestGeometry(t.geometry,e,i);break;case"FeatureCollection":if(t.features)for(var o=0;o<t.features.length;o++);}return r};_GeoJsonHitTest.hitTestPolygon=function(t,e,i){var r=!1;if(t&&t.coordinates){for(var o=t.coordinates,n=o.length,a=0;a<1;a++){var s=o[a];r=this.contains(s,e,i)}if(r)for(a=1;a<n;a++){s=o[a];if(this.contains(s,e,i)){r=!1;break}}}return r};_GeoJsonHitTest.hitTestMultiPolygon=function(t,e,i){var r=!1;if(t&&t.coordinates)for(var o=t.coordinates,n=o.length-1;n>=0;n--){for(var a=o[n],s=a.length,h=0;h<1;h++){var l=a[h];r=this.contains(l,e,i)}if(r)for(var c=1;c<s;c++){l=a[c];if(this.contains(l,e,i)){r=!1;break}}if(r)break}return r};_GeoJsonHitTest.hitTestGeometry=function(t,e,i){var r=!1;if(t)switch(t.type){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":break;case"Polygon":r=this.hitTestPolygon(t,e,i);break;case"MultiPolygon":r=this.hitTestMultiPolygon(t,e,i);break;case"GeometryCollection":if(t.geometries)for(var o=0;o<t.geometries.length&&!(r=this.hitTestGeometry(t.geometries[o],e,i));o++);}return r};_GeoJsonHitTest.contains=function(t,e,i){for(var r=0,o=t.length,n=0;n<o-1;n++){var a=t[n][0],s=t[n][1],h=t[n+1][0],l=t[n+1][1];this.west(a,s,h,l,e,i)&&++r}return r%2==1};_GeoJsonHitTest.west=function(t,e,i,r,o,n){return e<=r?!(n<=e||n>r||o>=t&&o>=i)&&(o<t&&o<i||(n-e)/(o-t)>(r-e)/(i-t)):this.west(i,r,t,e,o,n)};return _GeoJsonHitTest}();exports._GeoJsonHitTest=_GeoJsonHitTest;var GeoMapLayer=function(t){__extends(GeoMapLayer,t);function GeoMapLayer(e){var i=t.call(this)||this;i._render=new _GeoJsonRender;i._symbolSize=5;i.style={stroke:"gray",fill:"transparent",strokeWidth:.5};e&&i.initialize(e);return i}Object.defineProperty(GeoMapLayer.prototype,"itemFormatter",{get:function(){return this._ifmt},set:function(t){if(this._ifmt!=t){this._ifmt=wijmo_1.asFunction(t,!0);this._clearCache();this.invalidate()}},enumerable:!0,configurable:!0});GeoMapLayer.prototype.getAllFeatures=function(){return this._render.getAllFeatures(this.itemsSource)};GeoMapLayer.prototype.render=function(t,e,i){this._render.hasPoints&&this._clearCache();var r=this._g;if(r)i.appendChild(r);else{r=t.startGroup();this._render.symbolSize=this.symbolSize;this._render.converter=this.map._proj;var o=this.colorScale;o&&o.domain(this.getAllFeatures());this._applyStyle(t);this._render.prefix=this.map.layers.indexOf(this).toString()+"_";o?this._render.render(t,this.itemsSource,(function(t,e){t.fill=o.convert(o.getValue(e))})):this._render.render(t,this.itemsSource,this.itemFormatter);t.endGroup();this._g=r}0==r.transform.baseVal.numberOfItems?r.transform.baseVal.appendItem(e):r.transform.baseVal.replaceItem(e,0);return r};GeoMapLayer.prototype.getGeoBBox=function(t){return t?this._render.getBBox(t):this._render.getBBox(this.itemsSource)};Object.defineProperty(GeoMapLayer.prototype,"symbolSize",{get:function(){return this._symbolSize},set:function(t){if(this._symbolSize!=t){this._symbolSize=wijmo_1.asNumber(t);this.invalidate()}},enumerable:!0,configurable:!0});GeoMapLayer.prototype._clearCache=function(){this._g=null};GeoMapLayer.prototype._getFeatureById=function(t){return this._render.getFeatureById(t)};GeoMapLayer.prototype._hitTest=function(t,e){var i=this._render.hitTest(this.itemsSource,t,e);return i?i.properties:null};return GeoMapLayer}(MapLayerBase);exports.GeoMapLayer=GeoMapLayer;var GeoGridLayer=function(t){__extends(GeoGridLayer,t);function GeoGridLayer(){var e=t.call(this)||this;e.style={stroke:"lightgrey",strokeWidth:.5,fill:"lightgrey"};return e}GeoGridLayer.prototype.render=function(t,e,i){var r=t.startGroup("wj-flexmap-geogrid"),o=this.map,n=this.map._mapRect,a="wj-label";this._applyStyle(t);for(var s=-180;s<=180;s+=30){var h=o.convert(new wijmo_1.Point(s,-85)),l=o.convert(new wijmo_1.Point(s,85));if(this.isValid(h)&&this.isValid(l)){var c=s.toString(),u=t.measureString(c,a);t.drawString(c,new wijmo_1.Point(h.x-.5*u.width,n.top+u.height),a);t.drawLine(h.x,h.y,l.x,l.y)}}for(var p=n.left,_=-80;_<=80;_+=20){h=o.convert(new wijmo_1.Point(-180,_)),l=o.convert(new wijmo_1.Point(180,_));if(this.isValid(h)&&this.isValid(l)){c=p.toString(),u=t.measureString(c,a);t.drawString(_.toString(),new wijmo_1.Point(p,h.y+.5*u.height),a);t.drawLine(h.x,h.y,l.x,l.y)}}t.endGroup();return r};GeoGridLayer.prototype.isValid=function(t){return isFinite(t.x)&&isFinite(t.y)};return GeoGridLayer}(MapLayerBase);exports.GeoGridLayer=GeoGridLayer;wijmo_1._registerModule("wijmo.chart.map",selfModule);