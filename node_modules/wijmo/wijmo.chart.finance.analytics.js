/*!
    *
    * Wijmo Library 5.20231.879
    * http://wijmo.com/
    *
    * Copyright(c) GrapeCity, Inc.  All rights reserved.
    *
    * Licensed under the GrapeCity Commercial License.
    * sales@wijmo.com
    * wijmo.com/products/wijmo-5/license/
    *
    */

"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(t,i){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)};return function(t,i){extendStatics(t,i);function __(){this.constructor=t}t.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}}(),__importStar=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var i={};if(null!=t)for(var e in t)Object.hasOwnProperty.call(t,e)&&(i[e]=t[e]);i.default=t;return i};Object.defineProperty(exports,"__esModule",{value:!0});var wijmo_1=require("wijmo/wijmo"),wijmo_chart_1=require("wijmo/wijmo.chart"),wijmo_chart_finance_1=require("wijmo/wijmo.chart.finance"),selfModule=__importStar(require("wijmo/wijmo.chart.finance.analytics"));function isValid(t){return isFinite(t)&&!isNaN(t)&&wijmo_1.isNumber(t)}var Fibonacci=function(t){__extends(Fibonacci,t);function Fibonacci(i){var e=t.call(this)||this;e._levels=[0,23.6,38.2,50,61.8,100];e._uptrend=!0;e._labelPosition=wijmo_chart_1.LabelPosition.Left;e.rendering.addHandler(e._render);e.initialize(i);return e}Object.defineProperty(Fibonacci.prototype,"low",{get:function(){return this._low},set:function(t){if(t!=this._low){this._low=wijmo_1.asNumber(t,!0);this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(Fibonacci.prototype,"high",{get:function(){return this._high},set:function(t){if(t!=this._high){this._high=wijmo_1.asNumber(t,!0);this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(Fibonacci.prototype,"labelPosition",{get:function(){return this._labelPosition},set:function(t){if((t=wijmo_1.asEnum(t,wijmo_chart_1.LabelPosition,!0))!=this._labelPosition){this._labelPosition=t;this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(Fibonacci.prototype,"uptrend",{get:function(){return this._uptrend},set:function(t){if(t!=this._uptrend){this._uptrend=wijmo_1.asBoolean(t,!0);this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(Fibonacci.prototype,"levels",{get:function(){return this._levels},set:function(t){if(t!=this._levels){this._levels=wijmo_1.asArray(t,!0);this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(Fibonacci.prototype,"minX",{get:function(){return this._minX},set:function(t){if(t!=this._minX){this._minX=t;this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(Fibonacci.prototype,"maxX",{get:function(){return this._maxX},set:function(t){if(t!=this._maxX){this._maxX=t;this._invalidate()}},enumerable:!0,configurable:!0});Fibonacci.prototype._getMinX=function(){return wijmo_1.isNumber(this._minX)?this._minX:wijmo_1.isDate(this._minX)?wijmo_1.asDate(this._minX).valueOf():this._getAxisX().actualMin};Fibonacci.prototype._getMaxX=function(){return wijmo_1.isNumber(this._maxX)?this._maxX:wijmo_1.isDate(this._maxX)?wijmo_1.asDate(this._maxX).valueOf():this._getAxisX().actualMax};Fibonacci.prototype._updateLevels=function(){var i=void 0,e=void 0;if(void 0===this._low||void 0===this._high){var a=t.prototype.getValues.call(this,0),s=t.prototype.getValues.call(this,1);if(a)for(var n=a.length,o=this._getMinX(),r=this._getMaxX(),l=0;l<n;l++){var _=a[l],h=s?s[l]:l;if(!(h<o||h>r)&&!isNaN(_)){(void 0===i||i>_)&&(i=_);(void 0===e||e<_)&&(e=_)}}}void 0===this._low&&void 0!==i?this._actualLow=i:this._actualLow=this._low;void 0===this._high&&void 0!==e?this._actualHigh=e:this._actualHigh=this._high};Fibonacci.prototype._render=function(t,i){i.cancel=!0;var e=t;e._updateLevels();var a=e._getAxisX(),s=e._getAxisY(),n=i.engine,o=e._getSymbolStroke(e._chart.series.indexOf(e)),r=wijmo_chart_1._BasePlotter.cloneStyle(e.style,["fill"]),l=wijmo_chart_1._BasePlotter.cloneStyle(e.style,["stroke"]),_=e.chart._plotrectId;n.stroke=o;n.strokeWidth=2;n.textFill=o;var h=e._getMinX(),c=e._getMaxX();h<a.actualMin&&(h=a.actualMin);c>a.actualMax&&(c=a.actualMax);n.startGroup(null,_);for(var u=e._levels?e._levels.length:0,d=0;d<u;d++){var m=e._levels[d],p=a.convert(h),g=a.convert(c),f=e.uptrend?s.convert(e._actualLow+.01*m*(e._actualHigh-e._actualLow)):s.convert(e._actualHigh-.01*m*(e._actualHigh-e._actualLow));if(wijmo_chart_1._DataInfo.isValid(p)&&wijmo_chart_1._DataInfo.isValid(g)&&wijmo_chart_1._DataInfo.isValid(f)){n.drawLine(p,f,g,f,null,r);if(e.labelPosition!=wijmo_chart_1.LabelPosition.None){var y=m.toFixed(1)+"%",w=0;(e.uptrend&&0==d||!e.uptrend&&d==u-1)&&(w=2);switch(e.labelPosition){case wijmo_chart_1.LabelPosition.Left:wijmo_chart_1.FlexChartCore._renderText(n,y,new wijmo_1.Point(p,f),0,w,null,null,l);break;case wijmo_chart_1.LabelPosition.Center:wijmo_chart_1.FlexChartCore._renderText(n,y,new wijmo_1.Point(.5*(p+g),f),1,w,null,null,l);break;case wijmo_chart_1.LabelPosition.Right:wijmo_chart_1.FlexChartCore._renderText(n,y,new wijmo_1.Point(g,f),2,w,null,null,l)}}}}n.stroke=null;n.strokeWidth=null;n.textFill=null;n.endGroup()};Fibonacci.prototype._getChartType=function(){return wijmo_chart_1.ChartType.Line};return Fibonacci}(wijmo_chart_1.SeriesBase);exports.Fibonacci=Fibonacci;var FibonacciArcs=function(t){__extends(FibonacciArcs,t);function FibonacciArcs(i){var e=t.call(this)||this;e._levels=[38.2,50,61.8];e._labelPosition=wijmo_chart_1.LabelPosition.Top;e.rendering.addHandler(e._render,e);e.initialize(i);return e}Object.defineProperty(FibonacciArcs.prototype,"start",{get:function(){return this._start},set:function(t){if(t!==this.start){this._start=wijmo_1.asType(t,wijmo_chart_1.DataPoint);this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(FibonacciArcs.prototype,"end",{get:function(){return this._end},set:function(t){if(t!==this.end){this._end=wijmo_1.asType(t,wijmo_chart_1.DataPoint);this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(FibonacciArcs.prototype,"levels",{get:function(){return this._levels},set:function(t){if(t!==this._levels){this._levels=wijmo_1.asArray(t,!1);this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(FibonacciArcs.prototype,"labelPosition",{get:function(){return this._labelPosition},set:function(t){if((t=wijmo_1.asEnum(t,wijmo_chart_1.LabelPosition))!==this.labelPosition){this._labelPosition=t;this._invalidate()}},enumerable:!0,configurable:!0});FibonacciArcs.prototype._render=function(i,e){e.cancel=!0;var a=this._getX(0),s=this._getY(0),n=this._getX(1),o=this._getY(1);if(!(t.prototype._getLength.call(this)<=1)&&isValid(a)&&isValid(s)&&isValid(n)&&isValid(o)){var r,l=this._getAxisX(),_=this._getAxisY(),h=e.engine,c=this.chart.series.indexOf(this),u=this._getSymbolStroke(c),d=wijmo_chart_1._BasePlotter.cloneStyle(this.style,["fill"]),m=wijmo_chart_1._BasePlotter.cloneStyle(this.style,["stroke"]);h.stroke=u;h.strokeWidth=2;h.textFill=u;var p,g,f,y,w,v,j,V,b,x=this.chart._plotrectId,P=o-s;r=h.startGroup(null,x);wijmo_1.addClass(r,"fibonacci-arcs");isValid(a)&&isValid(s)&&isValid(n)&&isValid(o)&&h.drawLines([l.convert(a),l.convert(n)],[_.convert(s),_.convert(o)],null,d);y=Math.sqrt(Math.pow(l.convert(n)-l.convert(a),2)+Math.pow(_.convert(o)-_.convert(s),2));v=new wijmo_1.Point(n,o);for(var B=0;B<this.levels.length;B++){j=.01*this.levels[B];w=Math.abs(y*j);if(isValid(v.x)&&isValid(v.y)&&isValid(w)){p=l.convert(v.x);g=_.convert(v.y);h.drawDonutSegment(p,g,w,w,P>0?0:Math.PI,Math.PI,null,d);if(this.labelPosition!==wijmo_chart_1.LabelPosition.None&&0!==j){b=wijmo_1.Globalize.format(j,"p1");V=h.measureString(b,null,null,m);f=P<=0?g-w:g+w;switch(this.labelPosition){case wijmo_chart_1.LabelPosition.Center:f+=.5*V.height;break;case wijmo_chart_1.LabelPosition.Bottom:f+=P<=0?V.height:0;break;default:f+=P<=0?0:V.height}h.drawString(b,new wijmo_1.Point(p-.5*V.width,f),null,m)}}}h.stroke=null;h.strokeWidth=null;h.textFill=null;h.endGroup()}};FibonacciArcs.prototype._getX=function(t){var i=null;0===t&&this.start?i=this.start.x:1===t&&this.end&&(i=this.end.x);wijmo_1.isDate(i)&&(i=wijmo_1.asDate(i).valueOf());return i};FibonacciArcs.prototype._getY=function(t){var i=null;0===t&&this.start?i=this.start.y:1===t&&this.end&&(i=this.end.y);return i};FibonacciArcs.prototype._getChartType=function(){return wijmo_chart_1.ChartType.Line};return FibonacciArcs}(wijmo_chart_1.SeriesBase);exports.FibonacciArcs=FibonacciArcs;var FibonacciFans=function(t){__extends(FibonacciFans,t);function FibonacciFans(i){var e=t.call(this)||this;e._levels=[0,23.6,38.2,50,61.8,100];e._labelPosition=wijmo_chart_1.LabelPosition.Top;e.rendering.addHandler(e._render,e);e.initialize(i);return e}Object.defineProperty(FibonacciFans.prototype,"start",{get:function(){return this._start},set:function(t){if(t!==this.start){this._start=wijmo_1.asType(t,wijmo_chart_1.DataPoint);this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(FibonacciFans.prototype,"end",{get:function(){return this._end},set:function(t){if(t!==this.end){this._end=wijmo_1.asType(t,wijmo_chart_1.DataPoint);this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(FibonacciFans.prototype,"levels",{get:function(){return this._levels},set:function(t){if(t!==this._levels){this._levels=wijmo_1.asArray(t,!1);this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(FibonacciFans.prototype,"labelPosition",{get:function(){return this._labelPosition},set:function(t){if((t=wijmo_1.asEnum(t,wijmo_chart_1.LabelPosition))!==this.labelPosition){this._labelPosition=t;this._invalidate()}},enumerable:!0,configurable:!0});FibonacciFans.prototype._updateLevels=function(){if(!this.start||!this.end){var i,e,a,s,n=this.chart._getPlotter(this),o=this._getAxisX(),r=t.prototype.getValues.call(this,0),l=t.prototype.getValues.call(this,1)||n.dataInfo.getXVals();if(r&&r.length>0){a=wijmo_chart_finance_1._minimum(r);s=wijmo_chart_finance_1._maximum(r)}if(l&&l.length>0){i=wijmo_chart_finance_1._minimum(l);e=wijmo_chart_finance_1._maximum(l)}else{i=o.actualMin;e=o.actualMax}if(isValid(i)&&isValid(a)&&isValid(e)&&isValid(s)){this.start=new wijmo_chart_1.DataPoint(i,a);this.end=new wijmo_chart_1.DataPoint(e,s)}}};FibonacciFans.prototype._render=function(i,e){e.cancel=!0;this._updateLevels();var a=this._getX(0),s=this._getY(0),n=this._getX(1),o=this._getY(1);if(!(t.prototype._getLength.call(this)<=1)&&isValid(a)&&isValid(s)&&isValid(n)&&isValid(o)){var r=this._getAxisX(),l=this._getAxisY(),_=this.chart.series.indexOf(this),h=e.engine,c=this._getSymbolStroke(_),u=wijmo_chart_1._BasePlotter.cloneStyle(this.style,["fill"]),d=wijmo_chart_1._BasePlotter.cloneStyle(this.style,["stroke"]);h.stroke=c;h.strokeWidth=2;h.textFill=c;var m,p,g,f,y,w,v,j,V,b,x,P,B,k=o-s,M=n-a,I=this.chart._plotrectId;m=a;g=s;f=o;var L=p=n;h.startGroup(null,I);for(var X=0;X<this.levels.length;X++){p=M<0?r.actualMin:r.actualMax;f=(j=((f=g+(b=.01*this.levels[X])*k)-g)/(L-m))*p+(V=f-j*L);k>0&&f>l.actualMax?p=((f=l.actualMax)-V)/j:k<0&&f<l.actualMin&&(p=((f=l.actualMin)-V)/j);if(isValid(m)&&isValid(g)&&isValid(p)&&isValid(f)){y=new wijmo_1.Point(r.convert(m),l.convert(g));w=new wijmo_1.Point(r.convert(p),l.convert(f));h.drawLines([y.x,w.x],[y.y,w.y],null,u);if(this.labelPosition!=wijmo_chart_1.LabelPosition.None){x=wijmo_1.Globalize.format(b,"p1");P=h.measureString(x,null,null,d);B=180*Math.atan((w.y-y.y)/(w.x-y.x))/Math.PI;v=w.clone();w.x=M>0?w.x-P.width:w.x;var O,S=B*Math.PI/180,F=new wijmo_1.Point,C=new wijmo_1.Point,A=new wijmo_1.Point,T=new wijmo_1.Point,D=l.convert(l.actualMin),Y=l.convert(l.actualMax),R=r.convert(r.actualMin),W=r.convert(r.actualMax),N=v.clone();switch(this.labelPosition){case wijmo_chart_1.LabelPosition.Center:w.y+=.5*P.height;N.y+=.5*P.height;break;case wijmo_chart_1.LabelPosition.Bottom:w.y+=P.height}if(M>0){if(this.labelPosition===wijmo_chart_1.LabelPosition.Top||this.labelPosition===wijmo_chart_1.LabelPosition.Center){T=N.clone();A.x=T.x+P.height*Math.sin(S);A.y=T.y-P.height*Math.cos(S);F.x=T.x-P.width*Math.cos(S)+P.height*Math.sin(S);F.y=T.y-P.width*Math.sin(S)-P.height*Math.cos(S);C.x=T.x-P.width*Math.cos(S);C.y=T.y-P.width*Math.sin(S)}else if(this.labelPosition===wijmo_chart_1.LabelPosition.Bottom){A=N.clone();F.x=A.x-P.width*Math.cos(S);F.y=A.y-P.width*Math.sin(S);C.x=F.x-P.height*Math.sin(S);C.y=F.y+P.height*Math.cos(S);T.x=F.x+P.width*Math.cos(S)-P.height*Math.sin(S);T.y=F.y+P.width*Math.sin(S)+P.height*Math.cos(S)}if(k>0){if(A.y<Y){j=(l.convertBack(A.y)-l.convertBack(F.y))/(r.convertBack(A.x)-r.convertBack(F.x));V=l.convertBack(A.y)-j*r.convertBack(A.x);O=r.convert((l.actualMax-V)/j);w.x-=Math.abs(A.x-O)}T.x>W&&(w.x-=Math.abs(W-T.x))}else if(k<0){if(T.y>D){j=(l.convertBack(C.y)-l.convertBack(T.y))/(r.convertBack(C.x)-r.convertBack(T.x));V=l.convertBack(T.y)-j*r.convertBack(T.x);O=r.convert((l.actualMin-V)/j);w.x-=Math.max(Math.abs(O-T.x),Math.abs(D-T.y))}A.x>W&&(w.x-=Math.abs(W-A.x))}}else if(M<0){if(this.labelPosition===wijmo_chart_1.LabelPosition.Top||this.labelPosition===wijmo_chart_1.LabelPosition.Center){C=N.clone();F.x=C.x+P.height*Math.sin(S);F.y=C.y-P.height*Math.cos(S);T.x=C.x+P.width*Math.cos(S);T.y=C.y+P.width*Math.sin(S);A.x=F.x+P.width*Math.cos(S);A.y=F.y+P.width*Math.sin(S)}else if(this.labelPosition===wijmo_chart_1.LabelPosition.Bottom){F=N.clone();A.x=F.x+P.width*Math.cos(S);A.y=F.y+P.width*Math.sin(S);C.x=F.x-P.height*Math.sin(S);C.y=F.y+P.height*Math.cos(S);T.x=F.x+P.width*Math.cos(S)-P.height*Math.sin(S);T.y=F.y+P.width*Math.sin(S)+P.height*Math.cos(S)}if(k>0){if(F.y<Y){j=(l.convertBack(F.y)-l.convertBack(A.y))/(r.convertBack(F.x)-r.convertBack(A.x));V=l.convertBack(F.y)-j*r.convertBack(F.x);O=r.convert((l.actualMax-V)/j);w.x+=Math.abs(F.x-O)}C.x<R&&(w.x+=Math.abs(R-C.x))}else if(k<0){if(C.y>D){j=(l.convertBack(T.y)-l.convertBack(C.y))/(r.convertBack(T.x)-r.convertBack(C.x));V=l.convertBack(C.y)-j*r.convertBack(C.x);O=r.convert((l.actualMin-V)/j);w.x+=Math.max(Math.abs(O-C.x),Math.abs(D-C.y))}F.x<R&&(w.x+=Math.abs(R-F.x))}}isFinite(w.x)&&isFinite(w.y)&&(0===B?h.drawString(x,w,null,d):h.drawStringRotated(x,w,v,B,null,d))}}}h.stroke=null;h.strokeWidth=null;h.textFill=null;h.endGroup()}};FibonacciFans.prototype._getX=function(t){var i=null;0===t&&this.start?i=this.start.x:1===t&&this.end&&(i=this.end.x);wijmo_1.isDate(i)&&(i=wijmo_1.asDate(i).valueOf());return i};FibonacciFans.prototype._getY=function(t){var i=null;0===t&&this.start?i=this.start.y:1===t&&this.end&&(i=this.end.y);return i};FibonacciFans.prototype._getChartType=function(){return wijmo_chart_1.ChartType.Line};return FibonacciFans}(wijmo_chart_1.SeriesBase);exports.FibonacciFans=FibonacciFans;var FibonacciTimeZones=function(t){__extends(FibonacciTimeZones,t);function FibonacciTimeZones(i){var e=t.call(this)||this;e._levels=[0,1,2,3,5,8,13,21,34];e._labelPosition=wijmo_chart_1.LabelPosition.Right;e.rendering.addHandler(e._render,e);e.initialize(i);return e}Object.defineProperty(FibonacciTimeZones.prototype,"startX",{get:function(){return this._startX},set:function(t){if(t!==this.startX){wijmo_1.isDate(t)?this._startX=wijmo_1.asDate(t):this._startX=wijmo_1.asNumber(t);this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(FibonacciTimeZones.prototype,"endX",{get:function(){return this._endX},set:function(t){if(t!==this.endX){wijmo_1.isDate(t)?this._endX=wijmo_1.asDate(t):this._endX=wijmo_1.asNumber(t);this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(FibonacciTimeZones.prototype,"levels",{get:function(){return this._levels},set:function(t){if(t!==this._levels){this._levels=wijmo_1.asArray(t,!1);this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(FibonacciTimeZones.prototype,"labelPosition",{get:function(){return this._labelPosition},set:function(t){if((t=wijmo_1.asEnum(t,wijmo_chart_1.LabelPosition))!==this.labelPosition){this._labelPosition=t;this._invalidate()}},enumerable:!0,configurable:!0});FibonacciTimeZones.prototype._render=function(i,e){e.cancel=!0;this._updateLevels();var a=this._getX(0),s=this._getX(1);if(!(t.prototype._getLength.call(this)<=1)&&isValid(a)&&isValid(s)){var n,o,r,l,_=s-a,h=this._getAxisX(),c=this._getAxisY(),u=this._chart.series.indexOf(this),d=e.engine,m=this._getSymbolStroke(u),p=wijmo_chart_1._BasePlotter.cloneStyle(this.style,["fill"]),g=wijmo_chart_1._BasePlotter.cloneStyle(this.style,["stroke"]),f=c.convert(c.actualMin),y=c.convert(c.actualMax),w=this.chart._plotrectId;d.stroke=m;d.strokeWidth=2;d.textFill=m;if(0!==_){d.startGroup(null,w);for(var v=0;v<this.levels.length;v++)if(!((o=_*(n=this.levels[v])+a)<h.actualMin||h.actualMax<o)&&isValid(o)){o=h.convert(o);d.drawLine(o,f,o,y,null,p);if(this.labelPosition!==wijmo_chart_1.LabelPosition.None){l=wijmo_1.Globalize.format(n,"n0");r=d.measureString(l,null,null,g);switch(this.labelPosition){case wijmo_chart_1.LabelPosition.Left:o-=r.width+2;break;case wijmo_chart_1.LabelPosition.Center:o-=r.width/2;break;case wijmo_chart_1.LabelPosition.Right:o+=2;break;default:o=_<0?o-r.width-2:o+2}d.drawString(l,new wijmo_1.Point(o,f),null,g)}}d.stroke=null;d.strokeWidth=null;d.textFill=null;d.endGroup()}}};FibonacciTimeZones.prototype._updateLevels=function(){var i=this.chart._getPlotter(this),e=t.prototype.getValues.call(this,1)||i.dataInfo.getXVals();if(!(t.prototype._getLength.call(this)<=1)){var a=this._getX(0),s=this._getX(1),n=wijmo_1.isNumber(a)&&wijmo_1.isNumber(s);if(n||e){if(!n&&e){this._startX=e[0];this._endX=e[1]}}else{this._startX=0;this._endX=1}}};FibonacciTimeZones.prototype._getX=function(t){var i=null;0===t?i=this.startX:1===t&&(i=this.endX);wijmo_1.isDate(i)&&(i=wijmo_1.asDate(i).valueOf());return i};FibonacciTimeZones.prototype._getChartType=function(){return wijmo_chart_1.ChartType.Line};return FibonacciTimeZones}(wijmo_chart_1.SeriesBase);exports.FibonacciTimeZones=FibonacciTimeZones;var OverlayIndicatorBase=function(t){__extends(OverlayIndicatorBase,t);function OverlayIndicatorBase(i){var e=t.call(this,i)||this;e._seriesCount=1;return e}Object.defineProperty(OverlayIndicatorBase.prototype,"_hitTester",{get:function(){this._plotter&&!this.__hitTester&&(this.__hitTester=this._plotter.hitTester);return this.__hitTester},enumerable:!0,configurable:!0});OverlayIndicatorBase.prototype._getChartType=function(){return wijmo_chart_1.ChartType.Line};OverlayIndicatorBase.prototype._getXValues=function(){return t.prototype.getValues.call(this,1)||this._plotter.dataInfo.getXVals()};OverlayIndicatorBase.prototype._getDataPoint=function(t,i,e,a,s,n){var o=new wijmo_chart_1._DataPoint(e,a,t,i);o.y=i;o.yfmt=n._formatValue(i);o.x=t;o.xfmt=s._formatValue(t);return o};OverlayIndicatorBase.prototype._shouldCalculate=function(){return!0};OverlayIndicatorBase.prototype._init=function(){};OverlayIndicatorBase.prototype._calculate=function(){};OverlayIndicatorBase.prototype._clearValues=function(){t.prototype._clearValues.call(this);this.__hitTester=null};OverlayIndicatorBase.prototype._getName=function(t){var i=void 0;if(this.name)if(this.name.indexOf(",")){var e=this.name.split(",");e&&e.length-1>=t&&(i=e[t].trim())}else i=this.name;return i};OverlayIndicatorBase.prototype._getStyles=function(t){var i=null;if(t<0||null===this._styles)return i;var e=0;for(var a in this._styles){if(e===t&&this._styles.hasOwnProperty(a)){i=this._styles[a];break}e++}return i};OverlayIndicatorBase.prototype.legendItemLength=function(){return this._seriesCount};OverlayIndicatorBase.prototype.measureLegendItem=function(t,i){var e=this._getName(i),a=new wijmo_1.Size(0,0);e&&(a=this._measureLegendItem(t,this._getName(i)));return a};OverlayIndicatorBase.prototype.drawLegendItem=function(t,i,e){var a=this._getStyles(e)||this.style;this._getName(e)&&this._drawLegendItem(t,i,this._getChartType(),this._getName(e),a,this.symbolStyle)};return OverlayIndicatorBase}(wijmo_chart_1.SeriesBase);exports.OverlayIndicatorBase=OverlayIndicatorBase;var SingleOverlayIndicatorBase=function(t){__extends(SingleOverlayIndicatorBase,t);function SingleOverlayIndicatorBase(i){var e=t.call(this,i)||this;e._period=14;return e}Object.defineProperty(SingleOverlayIndicatorBase.prototype,"period",{get:function(){return this._period},set:function(t){if(t!==this._period){this._period=wijmo_1.asInt(t,!1,!0);this._clearValues();this._invalidate()}},enumerable:!0,configurable:!0});SingleOverlayIndicatorBase.prototype.getValues=function(i){var e=null;if(t.prototype._getLength.call(this)<=0)return e;if(this._shouldCalculate()){this._init();this._calculate()}0===i?e=this._yvals:1===i&&(e=this._xvals);return e};SingleOverlayIndicatorBase.prototype.getDataRect=function(i,e){if(e)return e;var a=null;if(t.prototype._getLength.call(this)<=0)return a;if(this._shouldCalculate()){this._init();this._calculate()}var s=wijmo_chart_finance_1._minimum(this._xvals),n=wijmo_chart_finance_1._maximum(this._xvals),o=wijmo_chart_finance_1._minimum(this._yvals),r=wijmo_chart_finance_1._maximum(this._yvals);wijmo_chart_1._DataInfo.isValid(s)&&wijmo_chart_1._DataInfo.isValid(n)&&wijmo_chart_1._DataInfo.isValid(o)&&wijmo_chart_1._DataInfo.isValid(r)&&(a=new wijmo_1.Rect(s,o,n-s,r-o));return a};SingleOverlayIndicatorBase.prototype._clearValues=function(){t.prototype._clearValues.call(this);this._xvals=null;this._yvals=null};SingleOverlayIndicatorBase.prototype._shouldCalculate=function(){return!this._yvals||!this._xvals};SingleOverlayIndicatorBase.prototype._init=function(){t.prototype._init.call(this);this._yvals=[];this._xvals=[]};SingleOverlayIndicatorBase.prototype._getItem=function(i){if(t.prototype._getLength.call(this)<=0)return t.prototype._getItem.call(this,i);if(this._shouldCalculate()){this._init();this._calculate()}i=t.prototype._getLength.call(this)-wijmo_chart_finance_1._minimum(this._yvals.length,this._xvals.length)+i;return t.prototype._getItem.call(this,i)};return SingleOverlayIndicatorBase}(OverlayIndicatorBase);exports.SingleOverlayIndicatorBase=SingleOverlayIndicatorBase;var WilliamsR=function(t){__extends(WilliamsR,t);function WilliamsR(i){var e=t.call(this)||this;e.period=14;e.initialize(i);return e}WilliamsR.prototype._calculate=function(){var i=t.prototype._getLength.call(this);if(!(i<=0)){var e=t.prototype._getBindingValues.call(this,0),a=t.prototype._getBindingValues.call(this,1),s=t.prototype._getBindingValues.call(this,3),n=this._getXValues();this._yvals=_williamsR(e,a,s,this.period);this._xvals=n?n.slice(this.period-1):wijmo_chart_finance_1._range(this.period-1,i-1)}};return WilliamsR}(SingleOverlayIndicatorBase);exports.WilliamsR=WilliamsR;function _williamsR(t,i,e,a){wijmo_1.asArray(t,!1);wijmo_1.asArray(i,!1);wijmo_1.asArray(e,!1);wijmo_1.asInt(a,!1,!0);var s,n=wijmo_chart_finance_1._minimum(t.length,i.length,e.length),o=[],r=[],l=[];wijmo_1.assert(n>a&&a>1,"Williams %R period must be an integer less than the length of the data and greater than one.");for(s=a;s<=t.length;s++){o.push(wijmo_chart_finance_1._maximum(t.slice(s-a,s)));r.push(wijmo_chart_finance_1._minimum(i.slice(s-a,s)))}e.splice(0,a-1);for(s=0;s<o.length;s++)l.push((o[s]-e[s])/(o[s]-r[s])*-100);return l}exports._williamsR=_williamsR;var Stochastic=function(t){__extends(Stochastic,t);function Stochastic(i){var e=t.call(this)||this;e._kPeriod=14;e._dPeriod=3;e._smoothingPeriod=1;e._seriesCount=2;e.rendering.addHandler(e._rendering,e);e.initialize(i);return e}Object.defineProperty(Stochastic.prototype,"kPeriod",{get:function(){return this._kPeriod},set:function(t){if(t!==this._kPeriod){this._kPeriod=wijmo_1.asInt(t,!1,!0);this._clearValues();this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(Stochastic.prototype,"dPeriod",{get:function(){return this._dPeriod},set:function(t){if(t!==this._dPeriod){this._dPeriod=wijmo_1.asInt(t,!1,!0);this._clearValues();this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(Stochastic.prototype,"smoothingPeriod",{get:function(){return this._smoothingPeriod},set:function(t){if(t!==this._smoothingPeriod){this._smoothingPeriod=wijmo_1.asInt(t,!1,!0);this._clearValues();this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(Stochastic.prototype,"styles",{get:function(){return this._styles},set:function(t){if(t!==this._styles){this._styles=t;this._invalidate()}},enumerable:!0,configurable:!0});Stochastic.prototype.getDataRect=function(i,e){if(e)return e;var a=null;if(t.prototype._getLength.call(this)<=0)return a;if(this._shouldCalculate()){this._init();this._calculate()}var s=this._kVals.concat(this._dVals),n=this._kXVals.concat(this._dXVals),o=wijmo_chart_finance_1._minimum(n),r=wijmo_chart_finance_1._maximum(n),l=wijmo_chart_finance_1._minimum(s),_=wijmo_chart_finance_1._maximum(s);wijmo_chart_1._DataInfo.isValid(o)&&wijmo_chart_1._DataInfo.isValid(r)&&wijmo_chart_1._DataInfo.isValid(l)&&wijmo_chart_1._DataInfo.isValid(_)&&(a=new wijmo_1.Rect(o,l,r-o,_-l));return a};Stochastic.prototype._clearValues=function(){t.prototype._clearValues.call(this);this._kVals=null;this._kXVals=null;this._dVals=null;this._dXVals=null};Stochastic.prototype._shouldCalculate=function(){return!(this._kVals&&this._kXVals&&this._dVals&&this._dXVals)};Stochastic.prototype._init=function(){t.prototype._init.call(this);this._kVals=[];this._kXVals=[];this._dVals=[];this._dXVals=[]};Stochastic.prototype._calculate=function(){var i=t.prototype._getLength.call(this);if(!(t.prototype._getLength.call(this)<=0)){var e=t.prototype._getBindingValues.call(this,0),a=t.prototype._getBindingValues.call(this,1),s=t.prototype._getBindingValues.call(this,3),n=this._getXValues(),o=_stochastic(e,a,s,this.kPeriod,this.dPeriod,this.smoothingPeriod);this._kVals=o.ks;this._dVals=o.ds;this._kXVals=n?n.slice(this.kPeriod-1):wijmo_chart_finance_1._range(this.kPeriod-1,i-1);this.smoothingPeriod&&this.smoothingPeriod>1&&(this._kXVals=this._kXVals.slice(this._kXVals.length-this._kVals.length,this._kXVals.length));this._dXVals=this._kXVals.slice(this._kXVals.length-this._dVals.length,this._kXVals.length)}};Stochastic.prototype._rendering=function(i,e){e.cancel=!0;if(!(t.prototype._getLength.call(this)<=0)){if(this._shouldCalculate()){this._init();this._calculate()}var a=this.chart.series.indexOf(this),s=e.engine,n=this._getAxisX(),o=this._getAxisY(),r=wijmo_chart_1._BasePlotter.cloneStyle(this.style,["fill"]),l=this._getSymbolStroke(a),_=this.chart._plotrectId,h=null,c=l,u=2,d=null,m=l,p=2;if(this.styles&&wijmo_1.isObject(this.styles)){if(this.styles.kLine&&wijmo_1.isObject(this.styles.kLine)){c=(h=wijmo_chart_1._BasePlotter.cloneStyle(this.styles.kLine,["fill"])).stroke?h.stroke:l;u=h.strokeWidth?h.strokeWidth:2}if(this.styles.dLine&&wijmo_1.isObject(this.styles.dLine)){m=(d=wijmo_chart_1._BasePlotter.cloneStyle(this.styles.dLine,["fill"])).stroke?d.stroke:l;p=d.strokeWidth?d.strokeWidth:2}}var g,f,y,w,v=[],j=[],V=[],b=[],x=this._getLength();for(y=0;y<this._kVals.length;y++){w=x-this._kVals.length+y;j.push(n.convert(this._kXVals[y]));v.push(o.convert(this._kVals[y]));(g=this._getDataPoint(this._kXVals[y],this._kVals[y],a,w,n,o)).name=this._getName(0);(f=new wijmo_chart_1._CircleArea(new wijmo_1.Point(j[y],v[y]),.5*s.strokeWidth)).tag=g;this._hitTester.add(f,a)}this._hitTester.add(new wijmo_chart_1._LinesArea(j,v),a);s.stroke=c;s.strokeWidth=u;s.drawLines(j,v,null,r,_);for(y=0;y<this._dVals.length;y++){w=x-this._dVals.length+y;b.push(n.convert(this._dXVals[y]));V.push(o.convert(this._dVals[y]));(g=this._getDataPoint(this._dXVals[y],this._dVals[y],a,w,n,o)).name=this._getName(1);(f=new wijmo_chart_1._CircleArea(new wijmo_1.Point(b[y],V[y]),.5*s.strokeWidth)).tag=g;this._hitTester.add(f,a)}this._hitTester.add(new wijmo_chart_1._LinesArea(b,V),a);s.stroke=m;s.strokeWidth=p;s.drawLines(b,V,null,r,_)}};Stochastic.prototype.getCalculatedValues=function(i){i=wijmo_1.asString(i,!1);var e=[],a=0;if(t.prototype._getLength.call(this)<=0)return e;if(this._shouldCalculate()){this._init();this._calculate()}switch(i){case"kLine":for(;a<this._kVals.length;a++)e.push({x:this._kXVals[a],y:this._kVals[a]});break;case"dLine":for(;a<this._dVals.length;a++)e.push({x:this._dXVals[a],y:this._dVals[a]})}return e};return Stochastic}(OverlayIndicatorBase);exports.Stochastic=Stochastic;function _stochastic(t,i,e,a,s,n){wijmo_1.asArray(t,!1);wijmo_1.asArray(i,!1);wijmo_1.asArray(e,!1);wijmo_1.asInt(a,!1,!0);wijmo_1.asInt(s,!1,!0);wijmo_1.asInt(n,!0,!0);var o,r=[],l=[],_=[];for(o=a;o<=t.length;o++){r.push(wijmo_chart_finance_1._maximum(t.slice(o-a,o)));l.push(wijmo_chart_finance_1._minimum(i.slice(o-a,o)))}e=e.slice(a-1);for(o=0;o<e.length;o++)_.push((e[o]-l[o])/(r[o]-l[o])*100);n&&n>1&&(_=wijmo_chart_finance_1._sma(_,n));return{ks:_,ds:wijmo_chart_finance_1._sma(_,s)}}exports._stochastic=_stochastic;var RSI=function(t){__extends(RSI,t);function RSI(i){var e=t.call(this)||this;e.period=14;e.initialize(i);return e}RSI.prototype._calculate=function(){var i=t.prototype._getLength.call(this);if(!(i<=0)){var e=t.prototype._getBindingValues.call(this,0),a=this._getXValues();this._yvals=_rsi(e,this.period);this._xvals=a?a.slice(this.period):wijmo_chart_finance_1._range(this.period,i)}};return RSI}(SingleOverlayIndicatorBase);exports.RSI=RSI;function _rsi(t,i){wijmo_1.asArray(t,!1);wijmo_1.asInt(i,!0,!1);wijmo_1.assert(t.length>i&&i>1,"RSI period must be an integer less than the length of the data and greater than one.");var e,a,s,n,o=[],r=[],l=[],_=[];for(n=1;n<t.length;n++)o.push(t[n]-t[n-1]);e=o.map((function(t){return t>0?t:0}));a=o.map((function(t){return t<0?Math.abs(t):0}));for(n=i;n<=o.length;n++){if(n===i){r.push(wijmo_chart_finance_1._sum(e.slice(n-i,n))/i);l.push(wijmo_chart_finance_1._sum(a.slice(n-i,n))/i)}else{r.push((e[n-1]+r[n-i-1]*(i-1))/i);l.push((a[n-1]+l[n-i-1]*(i-1))/i)}s=r[n-i]/l[n-i];s=isFinite(s)?s:0;_.push(100-100/(1+s))}return _}exports._rsi=_rsi;var MacdBase=function(t){__extends(MacdBase,t);function MacdBase(i){var e=t.call(this,i)||this;e._fastPeriod=12;e._slowPeriod=26;e._smoothingPeriod=9;return e}Object.defineProperty(MacdBase.prototype,"fastPeriod",{get:function(){return this._fastPeriod},set:function(t){if(t!==this._fastPeriod){this._fastPeriod=wijmo_1.asInt(t,!1,!0);this._clearValues();this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(MacdBase.prototype,"slowPeriod",{get:function(){return this._slowPeriod},set:function(t){if(t!==this._slowPeriod){this._slowPeriod=wijmo_1.asInt(t,!1,!0);this._clearValues();this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(MacdBase.prototype,"smoothingPeriod",{get:function(){return this._smoothingPeriod},set:function(t){if(t!==this._smoothingPeriod){this._smoothingPeriod=wijmo_1.asInt(t,!1,!0);this._clearValues();this._invalidate()}},enumerable:!0,configurable:!0});MacdBase.prototype._clearValues=function(){t.prototype._clearValues.call(this);this._macdVals=null;this._macdXVals=null;this._signalVals=null;this._signalXVals=null;this._histogramVals=null;this._histogramXVals=null};MacdBase.prototype._shouldCalculate=function(){return!(this._macdVals&&this._macdXVals&&this._signalVals&&this._signalXVals&&this._histogramVals&&this._histogramXVals)};MacdBase.prototype._init=function(){t.prototype._init.call(this);this._macdVals=[];this._macdXVals=[];this._signalVals=[];this._signalXVals=[];this._histogramVals=[];this._histogramXVals=[]};MacdBase.prototype._calculate=function(){var i=t.prototype._getLength.call(this);if(!(i<=0)){var e=t.prototype.getValues.call(this,0),a=this._getXValues(),s=_macd(e,this.fastPeriod,this.slowPeriod,this.smoothingPeriod);this._macdVals=s.macds;this._signalVals=s.signals;this._histogramVals=s.histograms;this._macdXVals=a?a.slice(i-this._macdVals.length,i):wijmo_chart_finance_1._range(i-this._macdVals.length,i-1);this._signalXVals=a?a.slice(i-this._signalVals.length,i):wijmo_chart_finance_1._range(i-this._signalVals.length,i-1);this._histogramXVals=a?a.slice(i-this._histogramVals.length,i):wijmo_chart_finance_1._range(i-this._histogramVals.length,i-1)}};return MacdBase}(OverlayIndicatorBase);exports.MacdBase=MacdBase;var Macd=function(t){__extends(Macd,t);function Macd(i){var e=t.call(this)||this;e._seriesCount=2;e.rendering.addHandler(e._rendering,e);e.initialize(i);return e}Object.defineProperty(Macd.prototype,"styles",{get:function(){return this._styles},set:function(t){if(t!==this._styles){this._styles=t;this._invalidate()}},enumerable:!0,configurable:!0});Macd.prototype.legendItemLength=function(){return this.name.indexOf(",")>-1?2:1};Macd.prototype.getDataRect=function(i,e){if(e)return e;var a=null;if(t.prototype._getLength.call(this)<=0)return a;if(this._shouldCalculate()){this._init();this._calculate()}var s=[],n=[];n.push.apply(n,this._macdXVals);n.push.apply(n,this._signalXVals);s.push.apply(s,this._macdVals);s.push.apply(s,this._signalVals);var o=wijmo_chart_finance_1._minimum(n),r=wijmo_chart_finance_1._maximum(n),l=wijmo_chart_finance_1._minimum(s),_=wijmo_chart_finance_1._maximum(s);wijmo_chart_1._DataInfo.isValid(o)&&wijmo_chart_1._DataInfo.isValid(r)&&wijmo_chart_1._DataInfo.isValid(l)&&wijmo_chart_1._DataInfo.isValid(_)&&(a=new wijmo_1.Rect(o,l,r-o,_-l));return a};Macd.prototype._rendering=function(i,e){e.cancel=!0;if(!(t.prototype._getLength.call(this)<=0)){if(this._shouldCalculate()){this._init();this._calculate()}var a=this.chart.series.indexOf(this),s=e.engine,n=this._getAxisX(),o=this._getAxisY(),r=wijmo_chart_1._BasePlotter.cloneStyle(this.style,["fill"]),l=this._getSymbolStroke(a),_=this.chart._plotrectId,h=null,c=l,u=2,d=null,m=l,p=2;if(this.styles&&wijmo_1.isObject(this.styles)){if(this.styles.macdLine&&wijmo_1.isObject(this.styles.macdLine)){c=(h=wijmo_chart_1._BasePlotter.cloneStyle(this.styles.macdLine,["fill"])).stroke?h.stroke:l;u=h.strokeWidth?h.strokeWidth:2}if(this.styles.signalLine&&wijmo_1.isObject(this.styles.signalLine)){m=(d=wijmo_chart_1._BasePlotter.cloneStyle(this.styles.signalLine,["fill"])).stroke?d.stroke:l;p=d.strokeWidth?d.strokeWidth:2}}var g,f,y,w,v=[],j=[],V=[],b=[],x=this._getLength();for(y=0;y<this._macdVals.length;y++){w=x-this._macdVals.length+y;j.push(n.convert(this._macdXVals[y]));v.push(o.convert(this._macdVals[y]));(g=this._getDataPoint(this._macdXVals[y],this._macdVals[y],a,w,n,o)).name=this._getName(0);(f=new wijmo_chart_1._CircleArea(new wijmo_1.Point(j[y],v[y]),.5*s.strokeWidth)).tag=g;this._hitTester.add(f,a)}this._hitTester.add(new wijmo_chart_1._LinesArea(j,v),a);s.stroke=c;s.strokeWidth=u;s.drawLines(j,v,null,r,_);for(y=0;y<this._signalVals.length;y++){w=x-this._signalVals.length+y;b.push(n.convert(this._signalXVals[y]));V.push(o.convert(this._signalVals[y]));(g=this._getDataPoint(this._signalXVals[y],this._signalVals[y],a,w,n,o)).name=this._getName(1);(f=new wijmo_chart_1._CircleArea(new wijmo_1.Point(b[y],V[y]),.5*s.strokeWidth)).tag=g;this._hitTester.add(f,a)}this._hitTester.add(new wijmo_chart_1._LinesArea(b,V),a);s.stroke=m;s.strokeWidth=p;s.drawLines(b,V,null,r,_)}};Macd.prototype.getCalculatedValues=function(i){i=wijmo_1.asString(i,!1);var e=[],a=0;if(t.prototype._getLength.call(this)<=0)return e;if(this._shouldCalculate()){this._init();this._calculate()}switch(i){case"macdLine":for(;a<this._macdVals.length;a++)e.push({x:this._macdXVals[a],y:this._macdVals[a]});break;case"signalLine":for(;a<this._signalVals.length;a++)e.push({x:this._signalXVals[a],y:this._signalVals[a]})}return e};return Macd}(MacdBase);exports.Macd=Macd;var MovingAverageType,MacdHistogram=function(t){__extends(MacdHistogram,t);function MacdHistogram(i){return t.call(this,i)||this}MacdHistogram.prototype.getValues=function(i){var e=null;if(t.prototype._getLength.call(this)<=0)return e;if(this._shouldCalculate()){this._init();this._calculate()}0===i?e=this._histogramVals:1===i&&(e=this._histogramXVals);return e};MacdHistogram.prototype.getDataRect=function(i,e){if(e)return e;var a=null;if(t.prototype._getLength.call(this)<=0)return a;if(this._shouldCalculate()){this._init();this._calculate()}var s=wijmo_chart_finance_1._minimum(this._histogramXVals),n=wijmo_chart_finance_1._maximum(this._histogramXVals),o=wijmo_chart_finance_1._minimum(this._histogramVals),r=wijmo_chart_finance_1._maximum(this._histogramVals);wijmo_chart_1._DataInfo.isValid(s)&&wijmo_chart_1._DataInfo.isValid(n)&&wijmo_chart_1._DataInfo.isValid(o)&&wijmo_chart_1._DataInfo.isValid(r)&&(a=new wijmo_1.Rect(s,o,n-s,r-o));return a};MacdHistogram.prototype._getChartType=function(){return wijmo_chart_1.ChartType.Column};MacdHistogram.prototype._getItem=function(i){i=t.prototype._getLength.call(this)-wijmo_chart_finance_1._minimum(this._histogramVals.length,this._histogramXVals.length)+i;return t.prototype._getItem.call(this,i)};return MacdHistogram}(MacdBase);exports.MacdHistogram=MacdHistogram;function _macd(t,i,e,a){wijmo_1.asArray(t,!1);wijmo_1.asInt(i,!1,!0);wijmo_1.asInt(e,!1,!0);wijmo_1.asInt(a,!1,!0);var s,n=i>e;if(n){s=e;e=i;i=s}var o,r,l=wijmo_chart_finance_1._ema(t,i),_=wijmo_chart_finance_1._ema(t,e),h=[],c=[];l.splice(0,e-i);for(r=0;r<l.length;r++){s=l[r]-_[r];n&&(s*=-1);h.push(s)}o=wijmo_chart_finance_1._ema(h,a);var u=h.slice(h.length-o.length,h.length);for(r=0;r<u.length;r++)c.push(u[r]-o[r]);return{macds:h,signals:o,histograms:c}}exports._macd=_macd;!function(t){t[t.Simple=0]="Simple";t[t.Exponential=1]="Exponential"}(MovingAverageType=exports.MovingAverageType||(exports.MovingAverageType={}));var Envelopes=function(t){__extends(Envelopes,t);function Envelopes(i){var e=t.call(this)||this;e._period=20;e._type=MovingAverageType.Simple;e._size=.025;e.rendering.addHandler(e._rendering,e);e.initialize(i);return e}Object.defineProperty(Envelopes.prototype,"period",{get:function(){return this._period},set:function(t){if(t!==this._period){this._period=wijmo_1.asInt(t,!1,!0);this._clearValues();this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(Envelopes.prototype,"type",{get:function(){return this._type},set:function(t){if((t=wijmo_1.asEnum(t,MovingAverageType,!1))!==this._type){this._type=t;this._clearValues();this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(Envelopes.prototype,"size",{get:function(){return this._size},set:function(t){if(t!==this._size){this._size=wijmo_1.asNumber(t,!1,!0);this._clearValues();this._invalidate()}},enumerable:!0,configurable:!0});Envelopes.prototype.getDataRect=function(i,e){if(e)return e;var a=null;if(t.prototype._getLength.call(this)<=0)return a;if(this._shouldCalculate()){this._init();this._calculate()}var s=this._upperYVals.concat(this._lowerYVals),n=wijmo_chart_finance_1._minimum(this._xVals),o=wijmo_chart_finance_1._maximum(this._xVals),r=wijmo_chart_finance_1._minimum(s),l=wijmo_chart_finance_1._maximum(s);wijmo_chart_1._DataInfo.isValid(n)&&wijmo_chart_1._DataInfo.isValid(o)&&wijmo_chart_1._DataInfo.isValid(r)&&wijmo_chart_1._DataInfo.isValid(l)&&(a=new wijmo_1.Rect(n,r,o-n,l-r));return a};Envelopes.prototype._clearValues=function(){t.prototype._clearValues.call(this);this._upperYVals=null;this._lowerYVals=null;this._xVals=null};Envelopes.prototype._init=function(){t.prototype._init.call(this);this._upperYVals=[];this._lowerYVals=[];this._xVals=[]};Envelopes.prototype._shouldCalculate=function(){return!this._upperYVals||!this._lowerYVals||!this._xVals};Envelopes.prototype._calculate=function(){var i=this;if(!(t.prototype._getLength.call(this)<=0)){var e,a=t.prototype.getValues.call(this,0),s=this._getXValues();switch(this.type){case MovingAverageType.Exponential:e=wijmo_chart_finance_1._ema(a,this.period);break;case MovingAverageType.Simple:default:e=wijmo_chart_finance_1._sma(a,this.period)}this._xVals=s?s.slice(this.period-1):wijmo_chart_finance_1._range(this.period-1,t.prototype._getLength.call(this)-1);this._upperYVals=e.map((function(t){return t+t*i.size}));this._lowerYVals=e.map((function(t){return t-t*i.size}))}};Envelopes.prototype._rendering=function(i,e){e.cancel=!0;if(!(t.prototype._getLength.call(this)<=0)){if(this._shouldCalculate()){this._init();this._calculate()}var a=this.chart.series.indexOf(this),s=e.engine,n=this._getAxisX(),o=this._getAxisY(),r=wijmo_chart_finance_1._minimum(this._upperYVals.length,this._lowerYVals.length,this._xVals.length),l=wijmo_chart_1._BasePlotter.cloneStyle(this.style,["fill"]),_=this._getSymbolStroke(a),h=this.chart._plotrectId;if(r&&!(r<=0)){s.stroke=_;s.strokeWidth=2;for(var c,u,d,m=[],p=[],g=[],f=this._getLength(),y=0;y<r;y++){d=f-r+y;m.push(n.convert(this._xVals[y]));p.push(o.convert(this._upperYVals[y]));c=this._getDataPoint(this._xVals[y],this._upperYVals[y],a,d,n,o);(u=new wijmo_chart_1._CircleArea(new wijmo_1.Point(m[y],p[y]),.5*s.strokeWidth)).tag=c;this._hitTester.add(u,a);g.push(o.convert(this._lowerYVals[y]));c=this._getDataPoint(this._xVals[y],this._lowerYVals[y],a,d,n,o);(u=new wijmo_chart_1._CircleArea(new wijmo_1.Point(m[y],g[y]),.5*s.strokeWidth)).tag=c;this._hitTester.add(u,a)}this._hitTester.add(new wijmo_chart_1._LinesArea(m,p),a);this._hitTester.add(new wijmo_chart_1._LinesArea(m,g),a);s.drawLines(m,p,null,l,h);s.drawLines(m,g,null,l,h)}}};Envelopes.prototype.getCalculatedValues=function(i){i=wijmo_1.asString(i,!1);var e=[],a=0;if(t.prototype._getLength.call(this)<=0)return e;if(this._shouldCalculate()){this._init();this._calculate()}switch(i){case"upperEnvelope":for(;a<this._upperYVals.length;a++)e.push({x:this._xVals[a],y:this._upperYVals[a]});break;case"lowerEnvelope":for(;a<this._lowerYVals.length;a++)e.push({x:this._xVals[a],y:this._lowerYVals[a]})}return e};return Envelopes}(OverlayIndicatorBase);exports.Envelopes=Envelopes;var CCI=function(t){__extends(CCI,t);function CCI(i){var e=t.call(this)||this;e._constant=.015;e.period=20;e.initialize(i);return e}Object.defineProperty(CCI.prototype,"constant",{get:function(){return this._constant},set:function(t){if(t!==this._constant){this._constant=wijmo_1.asNumber(t,!1);this._clearValues();this._invalidate()}},enumerable:!0,configurable:!0});CCI.prototype._calculate=function(){var i=t.prototype._getLength.call(this);if(!(i<=0)){var e=t.prototype._getBindingValues.call(this,0),a=t.prototype._getBindingValues.call(this,1),s=t.prototype._getBindingValues.call(this,3),n=this._getXValues();this._yvals=_cci(e,a,s,this.period,this.constant);this._xvals=n?n.slice(this.period-1):wijmo_chart_finance_1._range(this.period-1,i-1)}};return CCI}(SingleOverlayIndicatorBase);exports.CCI=CCI;function _cci(t,i,e,a,s){wijmo_1.asArray(t,!1);wijmo_1.asArray(i,!1);wijmo_1.asArray(e,!1);wijmo_1.asInt(a,!1,!0);wijmo_1.asNumber(s,!1,!0);var n,o,r,l=wijmo_chart_finance_1._minimum(t.length,i.length,e.length),_=[],h=[],c=[];wijmo_1.assert(l>a&&a>1,"CCI period must be an integer less than the length of the data and greater than one.");for(o=0;o<l;o++)_.push(wijmo_chart_finance_1._average(t[o],i[o],e[o]));n=wijmo_chart_finance_1._sma(_,a);for(o=0;o<n.length;o++){r=_.slice(o,a+o).reduce((function(t,i){return t+Math.abs(n[o]-i)}),0);h.push(r/a)}_.splice(0,a-1);for(o=0;o<n.length;o++)c.push((_[o]-n[o])/(s*h[o]));return c}exports._cci=_cci;var BollingerBands=function(t){__extends(BollingerBands,t);function BollingerBands(i){var e=t.call(this)||this;e._period=20;e._multiplier=2;e.rendering.addHandler(e._rendering,e);e.initialize(i);return e}Object.defineProperty(BollingerBands.prototype,"period",{get:function(){return this._period},set:function(t){if(t!==this._period){this._period=wijmo_1.asInt(t,!1,!0);this._clearValues();this._invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(BollingerBands.prototype,"multiplier",{get:function(){return this._multiplier},set:function(t){if(t!==this._multiplier){this._multiplier=wijmo_1.asNumber(t,!1,!0);this._clearValues();this._invalidate()}},enumerable:!0,configurable:!0});BollingerBands.prototype.getDataRect=function(i,e){if(e)return e;if(t.prototype._getLength.call(this)<=0)return null;if(this._shouldCalculate()){this._init();this._calculate()}var a=this._upperYVals.concat(this._lowerYVals),s=wijmo_chart_finance_1._minimum(this._xVals),n=wijmo_chart_finance_1._maximum(this._xVals),o=wijmo_chart_finance_1._minimum(a),r=wijmo_chart_finance_1._maximum(a);return wijmo_chart_1._DataInfo.isValid(s)&&wijmo_chart_1._DataInfo.isValid(n)&&wijmo_chart_1._DataInfo.isValid(o)&&wijmo_chart_1._DataInfo.isValid(r)?new wijmo_1.Rect(s,o,n-s,r-o):null};BollingerBands.prototype._clearValues=function(){t.prototype._clearValues.call(this);this._upperYVals=null;this._middleYVals=null;this._lowerYVals=null;this._xVals=null};BollingerBands.prototype._shouldCalculate=function(){return!(this._upperYVals&&this._middleYVals&&this._lowerYVals&&this._xVals)};BollingerBands.prototype._init=function(){t.prototype._init.call(this);this._upperYVals=[];this._middleYVals=[];this._lowerYVals=[];this._xVals=[]};BollingerBands.prototype._calculate=function(){var i=t.prototype._getLength.call(this);if(!(i<=0)){var e=t.prototype.getValues.call(this,0),a=this._getXValues(),s=_bollingerBands(e,this.period,this.multiplier);this._upperYVals=s.uppers;this._middleYVals=s.middles;this._lowerYVals=s.lowers;this._xVals=a?a.slice(this.period-1):wijmo_chart_finance_1._range(this.period-1,i-1)}};BollingerBands.prototype._rendering=function(i,e){e.cancel=!0;if(!(t.prototype._getLength.call(this)<=0)){if(this._shouldCalculate()){this._init();this._calculate()}var a=this.chart.series.indexOf(this),s=e.engine,n=this._getAxisX(),o=this._getAxisY(),r=wijmo_chart_finance_1._minimum(this._upperYVals.length,this._middleYVals.length,this._lowerYVals.length,this._xVals.length),l=wijmo_chart_1._BasePlotter.cloneStyle(this.style,["fill"]),_=this._getSymbolStroke(a),h=this.chart._plotrectId;if(r&&!(r<=0)){s.stroke=_;s.strokeWidth=2;for(var c,u,d,m=[],p=[],g=[],f=[],y=this._getLength(),w=0;w<r;w++){d=y-r+w;m.push(n.convert(this._xVals[w]));p.push(o.convert(this._upperYVals[w]));c=this._getDataPoint(this._xVals[w],this._upperYVals[w],a,d,n,o);(u=new wijmo_chart_1._CircleArea(new wijmo_1.Point(m[w],p[w]),.5*s.strokeWidth)).tag=c;this._hitTester.add(u,a);g.push(o.convert(this._middleYVals[w]));c=this._getDataPoint(this._xVals[w],this._middleYVals[w],a,d,n,o);(u=new wijmo_chart_1._CircleArea(new wijmo_1.Point(m[w],g[w]),.5*s.strokeWidth)).tag=c;this._hitTester.add(u,a);f.push(o.convert(this._lowerYVals[w]));c=this._getDataPoint(this._xVals[w],this._lowerYVals[w],a,d,n,o);(u=new wijmo_chart_1._CircleArea(new wijmo_1.Point(m[w],f[w]),.5*s.strokeWidth)).tag=c;this._hitTester.add(u,a)}this._hitTester.add(new wijmo_chart_1._LinesArea(m,p),a);this._hitTester.add(new wijmo_chart_1._LinesArea(m,g),a);this._hitTester.add(new wijmo_chart_1._LinesArea(m,f),a);s.drawLines(m,p,null,l,h);s.drawLines(m,g,null,l,h);s.drawLines(m,f,null,l,h)}}};BollingerBands.prototype.getCalculatedValues=function(i){i=wijmo_1.asString(i,!1);var e=[],a=0;if(t.prototype._getLength.call(this)<=0)return e;if(this._shouldCalculate()){this._init();this._calculate()}switch(i){case"upperBand":for(;a<this._upperYVals.length;a++)e.push({x:this._xVals[a],y:this._upperYVals[a]});break;case"middleBand":for(;a<this._middleYVals.length;a++)e.push({x:this._xVals[a],y:this._middleYVals[a]});break;case"lowerBand":for(;a<this._lowerYVals.length;a++)e.push({x:this._xVals[a],y:this._lowerYVals[a]})}return e};return BollingerBands}(OverlayIndicatorBase);exports.BollingerBands=BollingerBands;function _bollingerBands(t,i,e){wijmo_1.asArray(t,!1);wijmo_1.asInt(i,!1,!0);wijmo_1.asNumber(e,!1,!0);wijmo_1.assert(t.length>i&&i>1,"Bollinger Bands period must be an integer less than the length of the data and greater than one.");var a,s=wijmo_chart_finance_1._sma(t,i),n=[];for(a=i;a<=t.length;a++)n.push(wijmo_chart_finance_1._stdDeviation(t.slice(a-i,a)));var o=s,r=s.map((function(t,i){return t+n[i]*e}));return{lowers:s.map((function(t,i){return t-n[i]*e})),middles:o,uppers:r}}exports._bollingerBands=_bollingerBands;var ATR=function(t){__extends(ATR,t);function ATR(i){var e=t.call(this)||this;e.period=14;e.initialize(i);return e}ATR.prototype._calculate=function(){if(!(t.prototype._getLength.call(this)<=0)){var i=t.prototype._getBindingValues.call(this,0),e=t.prototype._getBindingValues.call(this,1),a=t.prototype._getBindingValues.call(this,3),s=this._getXValues();this._yvals=wijmo_chart_finance_1._avgTrueRng(i,e,a,this.period);this._xvals=s?s.slice(this.period-1):wijmo_chart_finance_1._range(this.period-1,i.length)}};return ATR}(SingleOverlayIndicatorBase);exports.ATR=ATR;wijmo_1._registerModule("wijmo.chart.finance.analytics",selfModule);